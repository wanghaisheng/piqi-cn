<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2014/6 | piqi官方网站 中文版镜像</title>
  <meta name="author" content="Edwin">
  
  <meta name="description" content="piqi官方网站 中文版镜像">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="piqi官方网站 中文版镜像"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="piqi官方网站 中文版镜像" type="application/atom+xml">
  <link rel="stylesheet" href="css/style.css" media="screen" type="text/css">
  <script src="//upcdn.b0.upaiyun.com/libs/modernizr/modernizr-2.6.2.min.js"></script>
  
</head>


<body>
  <div id="container" class="container">
    <header id="sidebar" role="banner" class="sidebar"><div id="branding" class="branding">
  <a href="/">
    <img class="circle" src="img/koala.jpg" alt="Anthem">
  </a>
  <h1 id="site-title" class="title">
    <a href="/">piqi官方网站 中文版镜像</a>
  </h1>
</div>
<a href="#" id="toggle">信息</a>
<div class="about" style="display: none">
  <p>piqi官方网站 中文版镜像</p>
</div>
<nav class="menu-navigation-container">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/实例">实例</a></li>
    
      <li><a href="/文档">文档</a></li>
    
      <li><a href="/FAQ">FAQ</a></li>
    
      <li><a href="/下载">下载</a></li>
    
      <li><a href="/路线图">路线图</a></li>
    
      <li><a href="/原理">原理</a></li>
    
      <li><a href="/许可协议">许可协议</a></li>
    
  </ul>
</nav>
<div class="widget">
  
  <nav class="other">
  <ul>
    <li>
      <a href="http://piqi.org/" target="_blank">piqi官方网站</a>
    </li>
    <li>
      <a href="https://github.com/alavrik/piqi/blob/master/LICENSE/" target="_blank">版权声明</a>
    </li>
    <li>
      <a href="https://github.com/alavrik/piqi" target="_blank">GitHub repository</a>
    </li>
    <li>
      <a href="http://groups.google.com/group/piqi" target="_blank">Google Group</a>
    </li>

  </ul>
</nav>

  <nav class="search">
  <form action="http://google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</nav>

</div></header>
    <section id="content" class="blog">
      
<h2 class="archive-title">2014/6</h2>


  
    <article class="post">
  <header>
    
  
    <h1 class="title"><a href="/2014/06/13/Examples/">piqi 项目</a></h1>
  

    
      <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
    
  </header>
  <section class="entry">
    
      <h1 id="piqi_项目"><a href="http://piqi.org/" target="_blank" rel="external">piqi 项目</a></h1>
<p><strong>目录</strong></p>
<p>[TOC]</p>
<h2 id="Piq_and_Piqi_示例">Piq and Piqi 示例</h2>
<p>这部分包含了<code>.piq</code>和<code>piqi</code>文件的示例.  </p>
<p>数据(.piq文件)和数据定义(.piqi文件)有多种展现格式:  </p>
<ul>
<li><strong>Source</strong>—源代码.  </li>
<li><strong>Piq</strong>-经由<code>piqi convert</code>命令对source文件处理得到的Piq文件.  </li>
<li><strong>JSON</strong>-经由<code>piqi convert -t json</code>命令对原始Piq文件处理得到的JSON格式.  </li>
<li><strong>XML</strong>-经由<code>piqi convert -t xml</code>命令对原始Piq文件处理得到的XML格式.  </li>
<li><strong>Piq (with embedded Piqi)</strong>-与<strong>Piq</strong>类似,但是其中内嵌了定义Piq流中数据类型的Piqi模块,通过<code>piqi convert --embed-piqi -t piq</code>.  </li>
<li><strong>Pib</strong>-Binary representation of the Piq file produced by <code>piqi convert -t pib</code>.</li>
<li><strong>Piqi.Proto</strong>-通过<code>piqi to-proto</code>命令得到的Protocol Buffers 数据定义.  </li>
<li><strong>Proto.Piqi</strong>-通过<code>piqi of-proto</code>命令对Protocol Buffers <code>.proto</code>文件处理得到的Piqi类型定义/规范.  </li>
<li><strong>Piqi-light</strong>-轻量级的Piqi语法表示的Piqi类型定义/规范.  </li>
</ul>
<p><a href="/self-definition/">Piqi标准</a>包含了用来定义Piqi语言自身的实例.<br>(Examples listed below can be also found in Piqi <a href="http://github.com/alavrik/piqi/tree/master/examples/" target="_blank" rel="external">sources</a>.)</p>
<p><div id="accordion"></div></p>
<h3 id="Piq基本类型和基本语法元素">Piq基本类型和基本语法元素</h3>
<h4 id="comment-piq">comment.piq</h4>
<ul>
<li><a href="#comment_piq_source">Source</a></li>
<li><a href="#comment_piq_piq">Piq</a></li>
<li><a href="#comment_piq_json">JSON</a></li>
<li><a href="#comment_piq_xml">XML</a></li>
<li><a href="#comment_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#comment_piq_pib">Pib</a></li>
</ul>
<p><a name="comment_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>% This is <span class="operator">an</span> <span class="constant">empty</span> .piq <span class="built_in">file</span> <span class="operator">with</span> <span class="operator">a</span> bunch <span class="operator">of</span> comments

% comments start <span class="operator">with</span> <span class="string">'%'</span> <span class="keyword">character</span> <span class="operator">and</span> continue <span class="keyword">until</span> <span class="operator">the</span> <span class="function"><span class="keyword">end</span> <span class="title">of</span> <span class="title">the</span> <span class="title">line</span></span>

% <span class="constant">one</span>
% <span class="constant">two</span>
% <span class="constant">three</span>

% Note that <span class="string">'%%'</span> is <span class="operator">not</span> <span class="operator">a</span> valid literal sequence.
%
</pre></td></tr></table></figure><br><a name="comment_piq_piq"><br><a name="comment_piq_json"><br><a name="comment_piq_xml"><br><a name="comment_piq_piq_embedded"><br><a name="comment_piq_pib"><br>####    bool.piq    ####<br><br><em>   <a href="#bool_piq_source">Source</a>
</em>   <a href="#bool_piq_piq">Piq</a><br><em>   <a href="#bool_piq_json">JSON</a>
</em>   <a href="#bool_piq_xml">XML</a><br><em>   <a href="#bool_piq_piq_embedded">Piq (with embedded Piqi)</a>
</em>   <a href="#bool_piq_pib">Pib</a><br><a name="bool_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="code"><pre>(<span class="symbol">:bool</span>)

<span class="keyword">true</span> <span class="keyword">false</span>

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>

    .bool <span class="keyword">true</span>
]

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>

    .bool <span class="keyword">false</span>
]

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>

    % same as .bool <span class="keyword">true</span>
    .bool
]
</pre></td></tr></table></figure><br><a name="bool_piq_piq"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre>(<span class="symbol">:bool</span>)

<span class="keyword">true</span>

<span class="keyword">false</span>

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>
    .bool <span class="keyword">true</span>
]

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>
    .bool <span class="keyword">false</span>
]

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>
    .bool <span class="keyword">true</span>
]
</pre></td></tr></table></figure><br><a name="bool_piq_json"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"bool"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">true</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"bool"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">false</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span></span>, "<span class="attribute">bool</span>": <span class="value"><span class="literal">true</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span></span>, "<span class="attribute">bool</span>": <span class="value"><span class="literal">false</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span></span>, "<span class="attribute">bool</span>": <span class="value"><span class="literal">true</span> </span>}
</pre></td></tr></table></figure><br><a name="bool_piq_xml"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>true<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>false<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;<span class="title">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="title">bool</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;<span class="title">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="title">bool</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;<span class="title">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="title">bool</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="bool_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
</pre></td><td class="code"><pre>(:bool)

true

false

:piqi [
    <span class="preprocessor">.module</span> def
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> r
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> s
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> b
            <span class="preprocessor">.type</span> binary
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.default</span> <span class="string">"abc \xff\x00"</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> f
            <span class="preprocessor">.type</span> float
            <span class="preprocessor">.repeated</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> flag
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> bool
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> self
            <span class="preprocessor">.type</span> r
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> v
            <span class="preprocessor">.optional</span>
        ]
    ]
    <span class="preprocessor">.enum</span> [
        <span class="preprocessor">.name</span> e
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> a
            <span class="preprocessor">.protobuf</span>-name <span class="string">"e_a"</span>
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> b ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> c ]
    ]
    <span class="preprocessor">.variant</span> [
        <span class="preprocessor">.name</span> v
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> r ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> e ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> flag ]
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> l
            <span class="preprocessor">.type</span> v-list
        ]
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> a
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> uuid
        <span class="preprocessor">.type</span> binary
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> epoch-seconds
        <span class="preprocessor">.type</span> uint64
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> v-list
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list
        <span class="preprocessor">.type</span> int
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list-list
        <span class="preprocessor">.type</span> int-list
    ]
]

:def/r [
    <span class="preprocessor">.i</span> <span class="number">0</span>
    <span class="preprocessor">.bool</span> true
]

:def/r [
    <span class="preprocessor">.i</span> <span class="number">0</span>
    <span class="preprocessor">.bool</span> false
]

:def/r [
    <span class="preprocessor">.i</span> <span class="number">0</span>
    <span class="preprocessor">.bool</span> true
]
</pre></td></tr></table></figure><br><a name="bool_piq_pib"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre>

<span class="lasso">
        <span class="number">0000000</span>: faff ffff <span class="number">0</span>f13 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
        <span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0462</span> <span class="number">6</span>f6f <span class="number">6</span>c18 <span class="number">0108</span> <span class="number">0108</span> <span class="number">00</span>fa ffff  e<span class="built_in">..</span>bool<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
        <span class="number">0000020</span>: ff0f <span class="number">140</span>a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">1205</span>  <span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-type</span><span class="built_in">..</span>
        <span class="number">0000030</span>: <span class="number">6465</span> <span class="number">662</span>f <span class="number">7218</span> <span class="number">0212</span> <span class="number">0408</span> <span class="number">0030</span> <span class="number">0112</span> <span class="number">0408</span>  def/r<span class="attribute">...</span><span class="attribute">...</span><span class="number">0.</span><span class="attribute">...</span>
        <span class="number">0000040</span>: <span class="number">0030</span> <span class="number">0012</span> <span class="number">0408</span> <span class="number">0030</span> <span class="number">01</span>                   <span class="number">.0</span><span class="attribute">...</span><span class="built_in">..</span><span class="number">0.</span></span>
</pre></td></tr></table></figure><br>####    int.piq    ####<br><br><em>   <a href="#int_piq_source">Source</a>
</em>   <a href="#int_piq_piq">Piq</a><br><em>   <a href="#int_piq_json">JSON</a>
</em>   <a href="#int_piq_xml">XML</a><br><em>   <a href="#int_piq_piq_embedded">Piq (with embedded Piqi)</a>
</em>   <a href="#int_piq_pib">Pib</a><br><br><a name="int_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="code"><pre>% examples of integer values
(<span class="symbol">:int</span>)

<span class="number">0</span> -<span class="number">1</span> <span class="number">100</span> <span class="number">1_000_000_000</span> 

% <span class="constant">NOTE</span><span class="symbol">:</span> unsigned integers use different binary encoding
<span class="symbol">:uint</span> <span class="number">100</span>

% conventional base <span class="number">16</span> integers

<span class="number">0xffff</span> -<span class="number">0xffff_0000</span>

% base <span class="number">2</span> integer literal

0b1111_1111_1111_1111

% min <span class="keyword">and</span> max values <span class="keyword">for</span> various integer types/encodings

<span class="symbol">:uint32</span> <span class="number">0</span>
<span class="symbol">:uint32</span> <span class="number">0xffff_ffff</span>

<span class="symbol">:uint32-fixed</span> <span class="number">0</span>
<span class="symbol">:uint32-fixed</span> <span class="number">0xffff_ffff</span>

<span class="symbol">:int32</span> -<span class="number">0x8000_0000</span>
<span class="symbol">:int32</span> <span class="number">0x7fff_ffff</span>

<span class="symbol">:int32-fixed</span> -<span class="number">0x8000_0000</span>
<span class="symbol">:int32-fixed</span> <span class="number">0x7fff_ffff</span>

<span class="symbol">:protobuf-int32</span> -<span class="number">0x8000_0000</span>
<span class="symbol">:protobuf-int32</span> <span class="number">0x7fff_ffff</span>

<span class="symbol">:uint64</span> <span class="number">0</span>
<span class="symbol">:uint64</span> <span class="number">0xffff_ffff_ffff_ffff</span>

<span class="symbol">:uint64-fixed</span> <span class="number">0</span>
<span class="symbol">:uint64-fixed</span> <span class="number">0xffff_ffff_ffff_ffff</span>

<span class="symbol">:int64</span> -<span class="number">0x8000_0000_0000_0000</span>
<span class="symbol">:int64</span> <span class="number">0x7fff_ffff_ffff_ffff</span>

<span class="symbol">:int64-fixed</span> -<span class="number">0x8000_0000_0000_0000</span>
<span class="symbol">:int64-fixed</span> <span class="number">0x7fff_ffff_ffff_ffff</span>

<span class="symbol">:protobuf-int64</span> -<span class="number">0x8000_0000_0000_0000</span>
<span class="symbol">:protobuf-int64</span> <span class="number">0x7fff_ffff_ffff_ffff</span>
</pre></td></tr></table></figure><br><a name="int_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="code"><pre>
        (<span class="symbol">:int</span>)

        <span class="number">0</span>

        -<span class="number">1</span>

        <span class="number">100</span>

        <span class="number">1000000000</span>

        <span class="symbol">:uint</span> <span class="number">100</span>

        <span class="number">65535</span>

        -<span class="number">4294901760</span>

        <span class="number">65535</span>

        <span class="symbol">:uint32</span> <span class="number">0</span>

        <span class="symbol">:uint32</span> <span class="number">4294967295</span>

        <span class="symbol">:uint32-fixed</span> <span class="number">0</span>

        <span class="symbol">:uint32-fixed</span> <span class="number">4294967295</span>

        <span class="symbol">:int32</span> -<span class="number">2147483648</span>

        <span class="symbol">:int32</span> <span class="number">2147483647</span>

        <span class="symbol">:int32-fixed</span> -<span class="number">2147483648</span>

        <span class="symbol">:int32-fixed</span> <span class="number">2147483647</span>

        <span class="symbol">:protobuf-int32</span> -<span class="number">2147483648</span>

        <span class="symbol">:protobuf-int32</span> <span class="number">2147483647</span>

        <span class="symbol">:uint64</span> <span class="number">0</span>

        <span class="symbol">:uint64</span> <span class="number">0xffffffffffffffff</span>

        <span class="symbol">:uint64-fixed</span> <span class="number">0</span>

        <span class="symbol">:uint64-fixed</span> <span class="number">0xffffffffffffffff</span>

        <span class="symbol">:int64</span> -<span class="number">9223372036854775808</span>

        <span class="symbol">:int64</span> <span class="number">9223372036854775807</span>

        <span class="symbol">:int64-fixed</span> -<span class="number">9223372036854775808</span>

        <span class="symbol">:int64-fixed</span> <span class="number">9223372036854775807</span>

        <span class="symbol">:protobuf-int64</span> -<span class="number">9223372036854775808</span>

        <span class="symbol">:protobuf-int64</span> <span class="number">9223372036854775807</span>
</pre></td></tr></table></figure><br><a name="int_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">1</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">100</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1000000000</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">100</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">65535</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">4294901760</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">65535</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">4294967295</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint32-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint32-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">4294967295</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int32"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">2147483648</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">2147483647</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int32-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">2147483648</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int32-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">2147483647</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"protobuf-int32"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">2147483648</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"protobuf-int32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">2147483647</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint64"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint64"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">18446744073709551615</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint64-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"uint64-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">18446744073709551615</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int64"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">9223372036854775808</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int64"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">9223372036854775807</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int64-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">9223372036854775808</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int64-fixed"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">9223372036854775807</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"protobuf-int64"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">9223372036854775808</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"protobuf-int64"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">9223372036854775807</span> </span>}
</pre></td></tr></table></figure><br><a name="int_piq_xml"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-1<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>100<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>1000000000<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>100<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>65535<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-4294901760<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>65535<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>4294967295<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>4294967295<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-2147483648<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>2147483647<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-2147483648<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>2147483647<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-2147483648<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>2147483647<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>18446744073709551615<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>18446744073709551615<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-9223372036854775808<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>9223372036854775807<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-9223372036854775808<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>9223372036854775807<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-9223372036854775808<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>9223372036854775807<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="int_piq_piq_embedded"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="code"><pre>(<span class="symbol">:int</span>)

<span class="number">0</span>

-<span class="number">1</span>

<span class="number">100</span>

<span class="number">1000000000</span>

<span class="symbol">:uint</span> <span class="number">100</span>

<span class="number">65535</span>

-<span class="number">4294901760</span>

<span class="number">65535</span>

<span class="symbol">:uint32</span> <span class="number">0</span>

<span class="symbol">:uint32</span> <span class="number">4294967295</span>

<span class="symbol">:uint32-fixed</span> <span class="number">0</span>

<span class="symbol">:uint32-fixed</span> <span class="number">4294967295</span>

<span class="symbol">:int32</span> -<span class="number">2147483648</span>

<span class="symbol">:int32</span> <span class="number">2147483647</span>

<span class="symbol">:int32-fixed</span> -<span class="number">2147483648</span>

<span class="symbol">:int32-fixed</span> <span class="number">2147483647</span>

<span class="symbol">:protobuf-int32</span> -<span class="number">2147483648</span>

<span class="symbol">:protobuf-int32</span> <span class="number">2147483647</span>

<span class="symbol">:uint64</span> <span class="number">0</span>

<span class="symbol">:uint64</span> <span class="number">0xffffffffffffffff</span>

<span class="symbol">:uint64-fixed</span> <span class="number">0</span>

<span class="symbol">:uint64-fixed</span> <span class="number">0xffffffffffffffff</span>

<span class="symbol">:int64</span> -<span class="number">9223372036854775808</span>

<span class="symbol">:int64</span> <span class="number">9223372036854775807</span>

<span class="symbol">:int64-fixed</span> -<span class="number">9223372036854775808</span>

<span class="symbol">:int64-fixed</span> <span class="number">9223372036854775807</span>

<span class="symbol">:protobuf-int64</span> -<span class="number">9223372036854775808</span>

<span class="symbol">:protobuf-int64</span> <span class="number">9223372036854775807</span>
</pre></td></tr></table></figure>

<p><a name="int_piq_pib"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre><span class="number">0000000</span>: faff ffff <span class="number">0</span>f12 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0369</span> <span class="number">6e74</span> <span class="number">1801</span> <span class="number">0800</span> <span class="number">0801</span> <span class="number">08</span>c8 <span class="number">0108</span>  e<span class="built_in">..</span>int<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000020</span>: <span class="number">80</span>a8 d6b9 <span class="number">07</span>fa ffff ff0f <span class="number">130</span>a <span class="number">0970</span> <span class="number">6971</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>piq
<span class="number">0000030</span>: <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">1204</span> <span class="number">7569</span> <span class="number">6e74</span> <span class="number">1802</span> <span class="number">1064</span>  i<span class="attribute">-type</span><span class="built_in">..</span>uint<span class="attribute">...</span>d
<span class="number">0000040</span>: <span class="number">08</span>fe ff07 <span class="number">08</span>ff fff7 ff1f <span class="number">08</span>fe ff07 faff  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000050</span>: ffff <span class="number">0</span>f15 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span> <span class="number">6512</span>  <span class="attribute">...</span><span class="attribute">...</span>piqi<span class="attribute">-type</span><span class="built_in">.</span>
<span class="number">0000060</span>: <span class="number">0675</span> <span class="number">696</span>e <span class="number">7433</span> <span class="number">3218</span> <span class="number">0318</span> <span class="number">0018</span> ffff ffff  <span class="built_in">.</span>uint32<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
<span class="number">0000070</span>: <span class="number">0</span>ffa ffff ff0f <span class="number">1</span>b0a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>piqi<span class="attribute">-ty</span>
<span class="number">0000080</span>: <span class="number">7065</span> <span class="number">120</span>c <span class="number">7569</span> <span class="number">6e74</span> <span class="number">3332</span> <span class="number">2</span>d66 <span class="number">6978</span> <span class="number">6564</span>  pe<span class="built_in">..</span>uint32<span class="attribute">-fixed</span>
<span class="number">0000090</span>: <span class="number">1804</span> <span class="number">2500</span> <span class="number">0000</span> <span class="number">0025</span> ffff ffff faff ffff  <span class="built_in">..</span><span class="subst">%</span><span class="attribute">...</span><span class="built_in">.</span><span class="subst">%</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">00000</span>a0: <span class="number">0</span>f14 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span> <span class="number">6512</span> <span class="number">0569</span>  <span class="attribute">...</span><span class="built_in">.</span>piqi<span class="attribute">-type</span><span class="built_in">..</span>i
<span class="number">00000</span>b0: <span class="number">6e74</span> <span class="number">3332</span> <span class="number">1805</span> <span class="number">28</span>ff ffff ff0f <span class="number">28</span>fe ffff  nt32<span class="built_in">..</span>(<span class="attribute">...</span><span class="built_in">..</span>(<span class="attribute">...</span>
<span class="number">00000</span>c0: ff0f faff ffff <span class="number">0</span>f1a <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>piqi<span class="attribute">-t</span>
<span class="number">00000</span>d0: <span class="number">7970</span> <span class="number">6512</span> <span class="number">0</span>b69 <span class="number">6e74</span> <span class="number">3332</span> <span class="number">2</span>d66 <span class="number">6978</span> <span class="number">6564</span>  ype<span class="built_in">..</span>int32<span class="attribute">-fixed</span>
<span class="number">00000e0</span>: <span class="number">1806</span> <span class="number">3500</span> <span class="number">0000</span> <span class="number">8035</span> ffff ff7f faff ffff  <span class="built_in">..</span><span class="number">5.</span><span class="attribute">...</span><span class="number">5.</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">00000</span>f0: <span class="number">0</span>f1d <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span> <span class="number">6512</span> <span class="number">0e70</span>  <span class="attribute">...</span><span class="built_in">.</span>piqi<span class="attribute">-type</span><span class="built_in">..</span>p
<span class="number">0000100</span>: <span class="number">726</span>f <span class="number">746</span>f <span class="number">6275</span> <span class="number">662</span>d <span class="number">696</span>e <span class="number">7433</span> <span class="number">3218</span> <span class="number">0738</span>  rotobuf<span class="attribute">-int32</span><span class="built_in">..</span><span class="number">8</span>
<span class="number">0000110</span>: <span class="number">8080</span> <span class="number">8080</span> f8ff ffff ff01 <span class="number">38</span>ff ffff ff07  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="number">.8</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">0000120</span>: faff ffff <span class="number">0</span>f15 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000130</span>: <span class="number">6512</span> <span class="number">0675</span> <span class="number">696</span>e <span class="number">7436</span> <span class="number">3418</span> <span class="number">0840</span> <span class="number">0040</span> ffff  e<span class="built_in">..</span>uint64<span class="built_in">..</span>@<span class="built_in">.</span>@<span class="built_in">..</span>
<span class="number">0000140</span>: ffff ffff ffff ff01 faff ffff <span class="number">0</span>f1b <span class="number">0</span>a09  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000150</span>: <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span> <span class="number">6512</span> <span class="number">0</span>c75 <span class="number">696</span>e <span class="number">7436</span>  piqi<span class="attribute">-type</span><span class="built_in">..</span>uint6
<span class="number">0000160</span>: <span class="number">342</span>d <span class="number">6669</span> <span class="number">7865</span> <span class="number">6418</span> <span class="number">0949</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="number">4</span><span class="attribute">-fixed</span><span class="built_in">..</span>I<span class="attribute">...</span><span class="attribute">...</span>
<span class="number">0000170</span>: <span class="number">0000</span> <span class="number">49</span>ff ffff ffff ffff fffa ffff ff0f  <span class="built_in">..</span>I<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000180</span>: <span class="number">140</span>a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">1205</span> <span class="number">696</span>e  <span class="attribute">...</span>piqi<span class="attribute">-type</span><span class="built_in">..</span><span class="keyword">in</span>
<span class="number">0000190</span>: <span class="number">7436</span> <span class="number">3418</span> <span class="number">0</span>a50 ffff ffff ffff ffff ff01  t64<span class="built_in">..</span>P<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">00001</span>a0: <span class="number">50</span>fe ffff ffff ffff ffff <span class="number">01</span>fa ffff ff0f  P<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
<span class="number">00001</span>b0: <span class="number">1</span>a0a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">120</span>b <span class="number">696</span>e  <span class="attribute">...</span>piqi<span class="attribute">-type</span><span class="built_in">..</span><span class="keyword">in</span>
<span class="number">00001</span>c0: <span class="number">7436</span> <span class="number">342</span>d <span class="number">6669</span> <span class="number">7865</span> <span class="number">6418</span> <span class="number">0</span>b59 <span class="number">0000</span> <span class="number">0000</span>  t64<span class="attribute">-fixed</span><span class="built_in">..</span>Y<span class="attribute">...</span><span class="built_in">.</span>
<span class="number">00001</span>d0: <span class="number">0000</span> <span class="number">0080</span> <span class="number">59</span>ff ffff ffff ffff <span class="number">7</span>ffa ffff  <span class="attribute">...</span><span class="built_in">.</span>Y<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">00001e0</span>: ff0f <span class="number">1</span>d0a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">120</span>e  <span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-type</span><span class="built_in">..</span>
<span class="number">00001</span>f0: <span class="number">7072</span> <span class="number">6</span>f74 <span class="number">6</span>f62 <span class="number">7566</span> <span class="number">2</span>d69 <span class="number">6e74</span> <span class="number">3634</span> <span class="number">180</span>c  protobuf<span class="attribute">-int64</span><span class="built_in">..</span>
<span class="number">0000200</span>: <span class="number">6080</span> <span class="number">8080</span> <span class="number">8080</span> <span class="number">8080</span> <span class="number">8080</span> <span class="number">0160</span> ffff ffff  <span class="string">`..........`</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000210</span>: ffff ffff <span class="number">7</span>f                             <span class="attribute">...</span><span class="built_in">..</span>
</pre></td></tr></table></figure>



<h4 id="float-piq">float.piq</h4>
<ul>
<li><a href="#float_piq_source">Source</a></li>
<li><a href="#float_piq_piq">Piq</a></li>
<li><a href="#float_piq_json">JSON</a></li>
<li><a href="#float_piq_xml">XML</a></li>
<li><a href="#float_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#float_piq_pib">Pib</a></li>
</ul>
<p><a name="float_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="code"><pre><span class="comment">% floating point values examples</span>
<span class="comment">%</span>
<span class="comment">% NOTE: "float" and "float64" are the same types with different names (IEEE 754</span>
<span class="comment">% double precision).</span>
<span class="comment">%</span>
(:float)  <span class="comment">% all subsequent values have type "float"</span>

<span class="number">0.0</span> -<span class="number">10.0</span>

<span class="number">3.14159</span>

-<span class="number">2e15</span>
<span class="number">5.6e-10</span>

<span class="comment">% integer values are converted to floats implicitly</span>
<span class="number">0</span>

-<span class="number">100000000000</span>

<span class="number">0xffff</span>_ffff_ffff_ffff 

<span class="comment">% not a number, positive and negative infinity</span>

<span class="number">0.</span><span class="built_in">nan</span> <span class="number">0.</span><span class="built_in">inf</span> -<span class="number">0.</span><span class="built_in">inf</span>

<span class="comment">%</span>
<span class="comment">% IEEE 754 single precision</span>
<span class="comment">%</span>
(:float32)

<span class="number">0.0</span> <span class="number">3.14159</span> 

<span class="number">2e15</span>
<span class="number">0.56e-10</span>

-<span class="number">100000000000</span>

<span class="number">0xffff</span>_ffff_ffff_ffff

<span class="number">0.</span><span class="built_in">nan</span> <span class="number">0.</span><span class="built_in">inf</span> -<span class="number">0.</span><span class="built_in">inf</span>
</pre></td></tr></table></figure>

<p><a name="float_piq_piq"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="code"><pre>

<span class="haml">
        (:float)

        0.0

        -<span class="ruby"><span class="number">10.0</span>
</span>
        3.14159

        -<span class="ruby"><span class="number">2000000000000000.0</span>
</span>
        5.6e-10

        0.0

        -<span class="ruby"><span class="number">100000000000.0</span>
</span>
        1.8446744073709552e+19

        0.nan

        0.inf

        -<span class="ruby"><span class="number">0</span>.inf
</span>
        (:float32)

        0.0

        3.14159

        2000000000000000.0

        5.6e-11

        -<span class="ruby"><span class="number">100000000000.0</span>
</span>
        1.8446744073709552e+19

        0.nan

        0.inf

        -<span class="ruby"><span class="number">0</span>.inf</span></span>
</pre></td></tr></table></figure>

<p><a name="float_piq_json"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">10.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">3.14159</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">2000000000000000.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">5.6e-10</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">100000000000.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1.8446744073709552e+19</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"NaN"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"Infinity"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"-Infinity"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">0.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">3.14159</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">2000000000000000.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">5.6e-11</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value">-<span class="number">100000000000.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1.8446744073709552e+19</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"NaN"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"Infinity"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float32"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"-Infinity"</span> </span>}
</pre></td></tr></table></figure>

<p><a name="float_piq_xml"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-10.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>3.14159<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-2000000000000000.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>5.6e-10<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-100000000000.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>1.8446744073709552e+19<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>NaN<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>Infinity<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-Infinity<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>3.14159<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>2000000000000000.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>5.6e-11<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-100000000000.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>1.8446744073709552e+19<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>NaN<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>Infinity<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>-Infinity<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure>


<p><a name="float_piq_piq_embedded"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td><td class="code"><pre>
        (:float)

        0.0

        -<span class="ruby"><span class="number">10.0</span>
</span>
        3.14159

        -<span class="ruby"><span class="number">2000000000000000.0</span>
</span>
        5.6e-10

        0.0

        -<span class="ruby"><span class="number">100000000000.0</span>
</span>
        1.8446744073709552e+19

        0.nan

        0.inf

        -<span class="ruby"><span class="number">0</span>.inf
</span>
        (:float32)

        0.0

        3.14159

        2000000000000000.0

        5.6e-11

        -<span class="ruby"><span class="number">100000000000.0</span>
</span>
        1.8446744073709552e+19

        0.nan

        0.inf

        -<span class="ruby"><span class="number">0</span>.inf</span>
</pre></td></tr></table></figure><br><a name="float_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="number">0000000</span>: faff ffff <span class="number">0</span>f14 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0566</span> <span class="number">6</span>c6f <span class="number">6174</span> <span class="number">1801</span> <span class="number">0900</span> <span class="number">0000</span> <span class="number">0000</span>  e<span class="built_in">..</span>float<span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">0000020</span>: <span class="number">0000</span> <span class="number">0009</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">24</span>c0 <span class="number">096</span>e <span class="number">861</span>b  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>$<span class="built_in">..</span>n<span class="built_in">..</span>
<span class="number">0000030</span>: f0f9 <span class="number">2109</span> <span class="number">4009</span> <span class="number">0000</span> <span class="number">3426</span> f56b <span class="number">1</span>cc3 <span class="number">0903</span>  <span class="built_in">..</span><span class="subst">!</span><span class="built_in">.</span>@<span class="attribute">...</span><span class="number">4</span><span class="subst">&</span><span class="variable">#038</span>;<span class="built_in">.</span>k<span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000040</span>: <span class="number">384</span>a e5cf <span class="number">3</span>d03 <span class="number">3e09</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="number">8</span>J<span class="built_in">..</span><span class="subst">=</span><span class="built_in">.</span><span class="subst">&gt;</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
<span class="number">0000050</span>: <span class="number">0900</span> <span class="number">0000</span> e876 <span class="number">4837</span> c209 <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="attribute">...</span><span class="built_in">..</span>vH7<span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">0000060</span>: f043 <span class="number">0901</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">00</span>f0 <span class="number">7</span>f09 <span class="number">0000</span> <span class="number">0000</span>  <span class="built_in">.</span>C<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>
<span class="number">0000070</span>: <span class="number">0000</span> f07f <span class="number">0900</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">00</span>f0 fffa ffff  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000080</span>: ff0f <span class="number">160</span>a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span> <span class="number">1207</span>  <span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-type</span><span class="built_in">..</span>
<span class="number">0000090</span>: <span class="number">666</span>c <span class="number">6</span>f61 <span class="number">7433</span> <span class="number">3218</span> <span class="number">010</span>d <span class="number">0000</span> <span class="number">0000</span> <span class="number">0</span>dd0  float32<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
<span class="number">00000</span>a0: <span class="number">0</span>f49 <span class="number">400</span>d a95f e358 <span class="number">0</span>d65 <span class="number">4</span>a76 <span class="number">2e0</span>d b743  <span class="built_in">.</span>I@<span class="built_in">..</span>_<span class="built_in">.</span>X<span class="built_in">.</span>eJv<span class="attribute">...</span>C
<span class="number">00000</span>b0: bad1 <span class="number">0</span>d00 <span class="number">0080</span> <span class="number">5</span>f0d <span class="number">0000</span> c07f <span class="number">0</span>d00 <span class="number">0080</span>  <span class="attribute">...</span><span class="attribute">...</span>_<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span>
<span class="number">00000</span>c0: <span class="number">7</span>f0d <span class="number">0000</span> <span class="number">80</span>ff                           <span class="attribute">...</span><span class="attribute">...</span>
</pre></td></tr></table></figure>




<h4 id="string-piq">string.piq</h4>
<ul>
<li><a href="#string_piq_source">Source</a></li>
<li><a href="#string_piq_piq">Piq</a></li>
<li><a href="#string_piq_json">JSON</a></li>
<li><a href="#string_piq_xml">XML</a></li>
<li><a href="#string_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#string_piq_pib">Pib</a></li>
</ul>
<p><a name="string_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre>
        :<span class="keyword">string</span> <span class="string">"this is a string\n"</span>

        % <span class="string">"hi"</span> <span class="operator">in</span> Russian (utf-<span class="number">8</span> encoded cyrillic <span class="keyword">characters</span>)
        :<span class="keyword">string</span> <span class="string">"привет"</span>

        % these are supported <span class="keyword">string</span> escape sequences
        :<span class="keyword">string</span> <span class="string">"\" \t\n\r  \x20 \u0020 \U00000020"</span>

        :<span class="keyword">string</span> <span class="string">"\x74\x79\x70\x65"</span>

        % NOTE: octal escape codes are unsupported (e.g. <span class="string">"\000\123"</span>)

        % binary values must <span class="operator">not</span> contain Unicode <span class="keyword">characters</span> <span class="operator">with</span> codes &gt; <span class="number">127</span>, <span class="keyword">any</span> ASCII
        % <span class="keyword">string</span> literal containing ascii-<span class="keyword">characters</span> represents <span class="operator">a</span> valid binary <span class="built_in">value</span>

        :binary <span class="string">"this is a binary literal"</span>

        :binary <span class="string">"binary literals may contain bytes encoded like this: \xfe"</span>

        :binary <span class="string">"non-unicode escapes are also allowed in binary literals: \" \t\r\n"</span>

        %
        % see also ./piq-<span class="keyword">text</span>.piq
        %
</pre></td></tr></table></figure><br><a name="string_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>:string "this is a string\n"

:string "привет"

:string "\" \t\n\r       "

:string "type"

:binary "this is a binary literal"

<span class="attribute">:binary "binary literals may contain bytes encoded like this:</span> \xfe"

<span class="attribute">:binary "non-unicode escapes are also allowed in binary literals:</span> \" \t\r\n"
</pre></td></tr></table></figure><br><a name="string_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"this is a string\n"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"привет"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"\" \t\n\r       "</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"type"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"binary"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"dGhpcyBpcyBhIGJpbmFyeSBsaXRlcmFs"</span> </span>}

{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"binary"</span></span>,
  "<span class="attribute">value</span>":
    <span class="value"><span class="string">"YmluYXJ5IGxpdGVyYWxzIG1heSBjb250YWluIGJ5dGVzIGVuY29kZWQgbGlrZSB0aGlzOiD+"</span>
</span>}

{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"binary"</span></span>,
  "<span class="attribute">value</span>":
    <span class="value"><span class="string">"bm9uLXVuaWNvZGUgZXNjYXBlcyBhcmUgYWxzbyBhbGxvd2VkIGluIGJpbmFyeSBsaXRlcmFsczogIiAJDQo="</span>
</span>}
</pre></td></tr></table></figure><br><a name="string_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="code"><pre>
        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>this is a string
        <span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>привет<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>"    

               <span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>type<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>dGhpcyBpcyBhIGJpbmFyeSBsaXRlcmFs<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>YmluYXJ5IGxpdGVyYWxzIG1heSBjb250YWluIGJ5dGVzIGVuY29kZWQgbGlrZSB0aGlzOiD+<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>bm9uLXVuaWNvZGUgZXNjYXBlcyBhcmUgYWxzbyBhbGxvd2VkIGluIGJpbmFyeSBsaXRlcmFsczogIiAJDQo=<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="string_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>:string "this is a string\n"

:string "привет"

:string "\" \t\n\r       "

:string "type"

:binary "this is a binary literal"

<span class="attribute">:binary "binary literals may contain bytes encoded like this:</span> \xfe"

<span class="attribute">:binary "non-unicode escapes are also allowed in binary literals:</span> \" \t\r\n"
</pre></td></tr></table></figure><br><a name="string_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f15 0a09 7069 7169 2d74 7970  ........piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 0673 7472 696e 6718 0212 1174 6869  e..string....thi</span>
<span class="attribute">0000020</span>: <span class="string">7320 6973 2061 2073 7472 696e 670a 120c  s is a string...</span>
<span class="attribute">0000030</span>: <span class="string">d0bf d180 d0b8 d0b2 d0b5 d182 120c 2220  .............." </span>
<span class="attribute">0000040</span>: <span class="string">090a 0d20 2020 2020 2020 1204 7479 7065  ...       ..type</span>
<span class="attribute">0000050</span>: <span class="string">faff ffff 0f15 0a09 7069 7169 2d74 7970  ........piqi-typ</span>
<span class="attribute">0000060</span>: <span class="string">6512 0662 696e 6172 7918 031a 1874 6869  e..binary....thi</span>
<span class="attribute">0000070</span>: <span class="string">7320 6973 2061 2062 696e 6172 7920 6c69  s is a binary li</span>
<span class="attribute">0000080</span>: <span class="string">7465 7261 6c1a 3662 696e 6172 7920 6c69  teral.6binary li</span>
<span class="attribute">0000090</span>: <span class="string">7465 7261 6c73 206d 6179 2063 6f6e 7461  terals may conta</span>
<span class="attribute">00000a0</span>: <span class="string">696e 2062 7974 6573 2065 6e63 6f64 6564  in bytes encoded</span>
<span class="attribute">00000b0</span>: <span class="string">206c 696b 6520 7468 6973 3a20 fe1a 3e6e   like this: ..&gt;n</span>
<span class="attribute">00000c0</span>: <span class="string">6f6e 2d75 6e69 636f 6465 2065 7363 6170  on-unicode escap</span>
<span class="attribute">00000d0</span>: <span class="string">6573 2061 7265 2061 6c73 6f20 616c 6c6f  es are also allo</span>
<span class="attribute">00000e0</span>: <span class="string">7765 6420 696e 2062 696e 6172 7920 6c69  wed in binary li</span>
<span class="attribute">00000f0</span>: <span class="string">7465 7261 6c73 3a20 2220 090d 0a         terals: " ...</span>
</pre></td></tr></table></figure>


<h4 id="text-piq">text.piq</h4>
<ul>
<li><a href="#text_piq_source">Source</a></li>
<li><a href="#text_piq_piq">Piq</a></li>
<li><a href="#text_piq_json">JSON</a></li>
<li><a href="#text_piq_xml">XML</a></li>
<li><a href="#text_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#text_piq_pib">Pib</a></li>
</ul>
<p><a name="text_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="code"><pre>(:piq-<span class="built_in">format</span>/<span class="keyword">text</span>)

% <span class="keyword">text</span> literal are separated between subsequent <span class="keyword">text</span> literals either <span class="keyword">by</span> some
% other lexical <span class="keyword">element</span> <span class="operator">or</span> <span class="keyword">by</span> <span class="constant">empty</span> vertical <span class="constant">space</span>

<span class="comment"># single-line verbatim text</span>

<span class="comment"># multi-line verbatim test</span>
<span class="comment"># here's another line</span>
<span class="comment">#</span>
<span class="comment"># and another one</span>
<span class="comment">#</span>

%
% whitespace <span class="keyword">before</span> <span class="string">'#'</span> <span class="keyword">character</span> is discarded
%

        <span class="comment"># one more line of text</span>

    <span class="comment">#</span>
    <span class="comment"># that's it</span>

%
% verbatim <span class="keyword">text</span> literals can also be used <span class="keyword">for</span> representing <span class="keyword">string</span> values
%

:<span class="keyword">string</span> <span class="comment"># text line</span>

:<span class="keyword">string</span>
    <span class="comment"># text multi</span>
    <span class="comment"># line</span>
</pre></td></tr></table></figure><br><a name="text_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>(:piq-format/text)

<span class="preprocessor"># single-line verbatim text</span>

<span class="preprocessor"># multi-line verbatim test</span>
<span class="preprocessor"># here's another line</span>
<span class="preprocessor">#</span>
<span class="preprocessor"># and another one</span>
<span class="preprocessor">#</span>

<span class="preprocessor"># one more line of text</span>

<span class="preprocessor">#</span>
<span class="preprocessor"># that's it</span>

:<span class="keyword">string</span> <span class="string">"text line"</span>

:<span class="keyword">string</span> <span class="string">"text multi\nline"</span>
</pre></td></tr></table></figure><br><a name="text_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piq-format/text"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"single-line verbatim text"</span> </span>}

{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piq-format/text"</span></span>,
  "<span class="attribute">value</span>":
    <span class="value"><span class="string">"multi-line verbatim test\nhere's another line\n\nand another one\n"</span>
</span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piq-format/text"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"one more line of text"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piq-format/text"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"\nthat's it"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"text line"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"text multi\nline"</span> </span>}
</pre></td></tr></table></figure><br><a name="text_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>single-line verbatim text<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>multi-line verbatim test
here's another line

and another one
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>one more line of text<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
that's it<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>text line<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>text multi
line<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="text_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="code"><pre>:piqi [
    .module piq-<span class="built_in">format</span>
    .<span class="built_in">alias</span> [
        .name <span class="built_in">word</span>
        .type <span class="keyword">string</span>
        .piq-<span class="built_in">format</span>.<span class="built_in">word</span>
    ]
    .<span class="built_in">alias</span> [
        .name <span class="keyword">text</span>
        .type <span class="keyword">string</span>
        .piq-<span class="built_in">format</span>.<span class="keyword">text</span>
    ]
]

(:piq-<span class="built_in">format</span>/<span class="keyword">text</span>)

<span class="comment"># single-line verbatim text</span>

<span class="comment"># multi-line verbatim test</span>
<span class="comment"># here's another line</span>
<span class="comment">#</span>
<span class="comment"># and another one</span>
<span class="comment">#</span>

<span class="comment"># one more line of text</span>

<span class="comment">#</span>
<span class="comment"># that's it</span>

:<span class="keyword">string</span> <span class="string">"text line"</span>

:<span class="keyword">string</span> <span class="string">"text multi\nline"</span>
</pre></td></tr></table></figure><br><a name="text_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f1e 0a09 7069 7169 2d74 7970  ........piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 0f70 6971 2d66 6f72 6d61 742f 7465  e..piq-format/te</span>
<span class="attribute">0000020</span>: <span class="string">7874 1801 0a19 7369 6e67 6c65 2d6c 696e  xt....single-lin</span>
<span class="attribute">0000030</span>: <span class="string">6520 7665 7262 6174 696d 2074 6578 740a  e verbatim text.</span>
<span class="attribute">0000040</span>: <span class="string">3e6d 756c 7469 2d6c 696e 6520 7665 7262  &gt;multi-line verb</span>
<span class="attribute">0000050</span>: <span class="string">6174 696d 2074 6573 740a 6865 7265 2773  atim test.here's</span>
<span class="attribute">0000060</span>: <span class="string">2061 6e6f 7468 6572 206c 696e 650a 0a61   another line..a</span>
<span class="attribute">0000070</span>: <span class="string">6e64 2061 6e6f 7468 6572 206f 6e65 0a0a  nd another one..</span>
<span class="attribute">0000080</span>: <span class="string">156f 6e65 206d 6f72 6520 6c69 6e65 206f  .one more line o</span>
<span class="attribute">0000090</span>: <span class="string">6620 7465 7874 0a0a 0a74 6861 7427 7320  f text...that's </span>
<span class="attribute">00000a0</span>: <span class="string">6974 faff ffff 0f15 0a09 7069 7169 2d74  it........piqi-t</span>
<span class="attribute">00000b0</span>: <span class="string">7970 6512 0673 7472 696e 6718 0212 0974  ype..string....t</span>
<span class="attribute">00000c0</span>: <span class="string">6578 7420 6c69 6e65 120f 7465 7874 206d  ext line..text m</span>
<span class="attribute">00000d0</span>: <span class="string">756c 7469 0a6c 696e 65                   ulti.line</span>
</pre></td></tr></table></figure>

<h4 id="any-piq">any.piq</h4>
<ul>
<li><a href="#any_piq_source">Source</a></li>
<li><a href="#any_piq_piq">Piq</a></li>
<li><a href="#any_piq_json">JSON</a></li>
<li><a href="#any_piq_xml">XML</a></li>
<li><a href="#any_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#any_piq_pib">Pib</a></li>
</ul>
<p><a name="any_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
</pre></td><td class="code"><pre>% this <span class="type">file</span> <span class="keyword">contains</span> examples <span class="keyword">of</span> values <span class="keyword">of</span> <span class="keyword">the</span> <span class="string">"piqi-any"</span> type; <span class="string">"piqi-any"</span> type
% represents <span class="keyword">some</span> typed (piq) <span class="keyword">or</span> untyped data (piq, json <span class="keyword">or</span> xml)

(:piqi-any)  % type hint

% untyped Piq data

(.foo)

<span class="number">1</span>

<span class="string">"string"</span>

<span class="property">word</span>

<span class="number">3.14159</span>

<span class="constant">false</span>

<span class="comment"># verbatim text spanning</span>
<span class="comment"># two lines</span>

[]

[.foo .bar]

.foo [ .bar <span class="number">1</span> ]

% typed Piq data

:int <span class="number">10</span>

:float <span class="number">1.2345</span>

:<span class="type">string</span> <span class="string">"s"</span>

:person/person [
    .<span class="property">name</span> <span class="string">"Joe User"</span>
    .<span class="property">id</span> <span class="number">1</span>
    .phone [ <span class="string">"(555) 123 45 67"</span> .work ]
]

:<span class="type">string</span> <span class="comment"># verbatim text</span>

% untyped JSON (via built-<span class="keyword">in</span> <span class="string">"json"</span> form)

(json
    <span class="comment"># [{"i": 1}, "foo"]</span>
)

(json
    <span class="comment"># 1</span>
)

(json
    <span class="comment"># []</span>
)

% untyped XML (via built-<span class="keyword">in</span> <span class="string">"xml"</span> form)

(xml
    <span class="comment"># &lt;value&gt;</span>
    <span class="comment">#   &lt;i&gt;1&lt;/i&gt;</span>
    <span class="comment">#   &lt;foo/&gt;</span>
    <span class="comment"># &lt;/value&gt;</span>
)
</pre></td></tr></table></figure><br><a name="any_piq_piq"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
</pre></td><td class="code"><pre>(<span class="symbol">:piqi-any</span>)

.foo

<span class="number">1</span>

<span class="string">"string"</span>

word

<span class="number">3.14159</span>

<span class="keyword">false</span>

<span class="comment"># verbatim text spanning</span>
<span class="comment"># two lines</span>

[]

[ .foo .bar ]

.foo [ .bar <span class="number">1</span> ]

<span class="symbol">:int</span> <span class="number">10</span>

<span class="symbol">:float</span> <span class="number">1.2345</span>

<span class="symbol">:string</span> <span class="string">"s"</span>

<span class="symbol">:person/person</span> [
    .name <span class="string">"Joe User"</span>
    .id <span class="number">1</span>
    .phone [
        .number <span class="string">"(555) 123 45 67"</span>
        .type.work
    ]
]

<span class="symbol">:string</span> <span class="string">"verbatim text"</span>

(json 
    <span class="comment"># [</span>
    <span class="comment">#   {</span>
    <span class="comment">#     "i": 1</span>
    <span class="comment">#   },</span>
    <span class="comment">#   "foo"</span>
    <span class="comment"># ]</span>
)

(json 
    <span class="comment"># 1</span>
)

(json 
    <span class="comment"># []</span>
)

(xml 
    <span class="comment"># &lt;value&gt;</span>
    <span class="comment">#   &lt;i&gt;1&lt;/i&gt;</span>
    <span class="comment">#   &lt;foo/&gt;</span>
    <span class="comment"># &lt;/value&gt;</span>
)
</pre></td></tr></table></figure><br><a name="any_piq_json"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">10</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1.2345</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"s"</span> </span>}

{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"person/person"</span></span>,
  "<span class="attribute">name</span>": <span class="value"><span class="string">"Joe User"</span></span>,
  "<span class="attribute">id</span>": <span class="value"><span class="number">1</span></span>,
  "<span class="attribute">phone</span>": <span class="value">[ { "<span class="attribute">number</span>": <span class="value"><span class="string">"(555) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"work"</span> </span>} ]
</span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"verbatim text"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value">[ { "<span class="attribute">i</span>": <span class="value"><span class="number">1</span> </span>}, <span class="string">"foo"</span> ] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value">[] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi-any"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="literal">null</span> </span>}
</pre></td></tr></table></figure><br><a name="any_piq_xml"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="code"><pre>
        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>10<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>1.2345<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>s<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>
          <span class="tag">&lt;<span class="title">name</span>&gt;</span>Joe User<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
          <span class="tag">&lt;<span class="title">id</span>&gt;</span>1<span class="tag">&lt;/<span class="title">id</span>&gt;</span>
          <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
            <span class="tag">&lt;<span class="title">number</span>&gt;</span>(555) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
            <span class="tag">&lt;<span class="title">type</span>&gt;</span>work<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>verbatim text<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>/&gt;</span>

        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>
          <span class="tag">&lt;<span class="title">i</span>&gt;</span>1<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
          <span class="tag">&lt;<span class="title">foo</span>/&gt;</span>
        <span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="any_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
</pre></td><td class="code"><pre>
        (:piqi-any)

        <span class="preprocessor">.foo</span>

        <span class="number">1</span>

        <span class="string">"string"</span>

        word

        <span class="number">3.14159</span>

        false

        <span class="preprocessor"># verbatim text spanning</span>
        <span class="preprocessor"># two lines</span>

        []

        [ <span class="preprocessor">.foo</span> <span class="preprocessor">.bar</span> ]

        <span class="preprocessor">.foo</span> [ <span class="preprocessor">.bar</span> <span class="number">1</span> ]

        :int <span class="number">10</span>

        :float <span class="number">1.2345</span>

        :string <span class="string">"s"</span>

        :piqi [
            <span class="preprocessor">.module</span> person
            <span class="preprocessor">.record</span> [
                <span class="preprocessor">.name</span> person
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> name
                    <span class="preprocessor">.type</span> string
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> id
                    <span class="preprocessor">.type</span> int
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> email
                    <span class="preprocessor">.type</span> string
                    <span class="preprocessor">.optional</span>
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> phone
                    <span class="preprocessor">.type</span> phone-number
                    <span class="preprocessor">.repeated</span>
                ]
            ]
            <span class="preprocessor">.record</span> [
                <span class="preprocessor">.name</span> phone-number
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> number
                    <span class="preprocessor">.type</span> string
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> type
                    <span class="preprocessor">.type</span> phone-type
                    <span class="preprocessor">.optional</span>
                    <span class="preprocessor">.default</span><span class="preprocessor">.home</span>
                ]
            ]
            <span class="preprocessor">.enum</span> [
                <span class="preprocessor">.name</span> phone-type
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> mobile ]
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> home ]
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> work ]
            ]
        ]

        :person/person [
            <span class="preprocessor">.name</span> <span class="string">"Joe User"</span>
            <span class="preprocessor">.id</span> <span class="number">1</span>
            <span class="preprocessor">.phone</span> [
                <span class="preprocessor">.number</span> <span class="string">"(555) 123 45 67"</span>
                <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
            ]
        ]

        :string <span class="string">"verbatim text"</span>

        (json 
            <span class="preprocessor"># [</span>
            <span class="preprocessor">#   {</span>
            <span class="preprocessor">#     "i": 1</span>
            <span class="preprocessor">#   },</span>
            <span class="preprocessor">#   "foo"</span>
            <span class="preprocessor"># ]</span>
        )

        (json 
            <span class="preprocessor"># 1</span>
        )

        (json 
            <span class="preprocessor"># []</span>
        )

        (xml 
            <span class="preprocessor"># &lt;value&gt;</span>
            <span class="preprocessor">#   &lt;i&gt;1&lt;/i&gt;</span>
            <span class="preprocessor">#   &lt;foo/&gt;</span>
            <span class="preprocessor"># &lt;/value&gt;</span>
        )
</pre></td></tr></table></figure><br><a name="any_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f17 0a09 7069 7169 2d74 7970  ........piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 0870 6971 692d 616e 7918 010a 000a  e..piqi-any.....</span>
<span class="attribute">0000020</span>: <span class="string">000a 000a 000a 000a 000a 000a 000a 000a  ................</span>
<span class="attribute">0000030</span>: <span class="string">00fa ffff ff0f 120a 0970 6971 692d 7479  .........piqi-ty</span>
<span class="attribute">0000040</span>: <span class="string">7065 1203 696e 7418 0210 14fa ffff ff0f  pe..int.........</span>
<span class="attribute">0000050</span>: <span class="string">140a 0970 6971 692d 7479 7065 1205 666c  ...piqi-type..fl</span>
<span class="attribute">0000060</span>: <span class="string">6f61 7418 0319 8d97 6e12 83c0 f33f faff  oat.....n....?..</span>
<span class="attribute">0000070</span>: <span class="string">ffff 0f15 0a09 7069 7169 2d74 7970 6512  ......piqi-type.</span>
<span class="attribute">0000080</span>: <span class="string">0673 7472 696e 6718 0422 0173 faff ffff  .string..".s....</span>
<span class="attribute">0000090</span>: <span class="string">0f1c 0a09 7069 7169 2d74 7970 6512 0d70  ....piqi-type..p</span>
<span class="attribute">00000a0</span>: <span class="string">6572 736f 6e2f 7065 7273 6f6e 1805 2a21  erson/person..*!</span>
<span class="attribute">00000b0</span>: <span class="string">0a08 4a6f 6520 5573 6572 1002 2213 0a0f  ..Joe User.."...</span>
<span class="attribute">00000c0</span>: <span class="string">2835 3535 2920 3132 3320 3435 2036 3710  (555) 123 45 67.</span>
<span class="attribute">00000d0</span>: <span class="string">0322 0d76 6572 6261 7469 6d20 7465 7874  .".verbatim text</span>
<span class="attribute">00000e0</span>: <span class="string">0a25 c2a2 889a 031f 5b0a 2020 7b0a 2020  .%......[.  {.  </span>
<span class="attribute">00000f0</span>: <span class="string">2020 2269 223a 2031 0a20 207d 2c0a 2020    "i": 1.  },.  </span>
<span class="attribute">0000100</span>: <span class="string">2266 6f6f 220a 5d0a 07c2 a288 9a03 0131  "foo".]........1</span>
<span class="attribute">0000110</span>: <span class="string">0a08 c2a2 889a 0302 5b5d 0a29 badd ed16  ........[].)....</span>
<span class="attribute">0000120</span>: <span class="string">243c 7661 6c75 653e 0a20 203c 693e 313c  $&lt;value&gt;.  &lt;i&gt;1&lt;</span>
<span class="attribute">0000130</span>: <span class="string">2f69 3e0a 2020 3c66 6f6f 2f3e 0a3c 2f76  /i&gt;.  &lt;foo/&gt;.&lt;/v</span>
<span class="attribute">0000140</span>: <span class="string">616c 7565 3e                             alue&gt;</span>
</pre></td></tr></table></figure>

<h3 id="Addressbook_example">Addressbook example</h3>
<pre><code>            `addressbook<span class="preprocessor">.proto</span>` 是对addressbook数据结果的定义.该文件取自[Protocol Buffers 教程](http://protobuf<span class="preprocessor">.googlecode</span><span class="preprocessor">.com</span>/svn/trunk/examples/).
    `addressbook<span class="preprocessor">.piq</span>`是一个_addressbook_ 实例.
</code></pre><h4 id="addressbook-proto">addressbook.proto</h4>
<pre><code><span class="bullet">*   </span>[<span class="link_label">Source</span>](<span class="link_url">#addressbook_proto_source</span>)
<span class="bullet">*   </span>[<span class="link_label">Proto.Piqi</span>](<span class="link_url">#addressbook_proto_piqi</span>)
<span class="bullet">*   </span>[<span class="link_label">Piqi-light</span>](<span class="link_url">#addressbook_proto_piqi_light</span>)
<span class="xml"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">name</span>=<span class="value">"addressbook_proto_source"</span>/&gt;</span></span>
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="code"><pre><span class="comment">// This file was taken from Google Protocol Buffers source distribution. It is</span>
<span class="comment">// also available here:</span>
<span class="comment">//</span>
<span class="comment">//     http://protobuf.googlecode.com/svn/trunk/examples/addressbook.proto</span>

<span class="keyword">package</span> tutorial;

option java_package = <span class="string">"com.example.tutorial"</span>;
option java_outer_classname = <span class="string">"AddressBookProtos"</span>;

message Person {
  required <span class="typename">string</span> name =<span class="number"> 1</span>;
  required <span class="typename">int32</span> id =<span class="number"> 2</span>;        <span class="comment">// Unique ID number for this person.</span>
  optional <span class="typename">string</span> email =<span class="number"> 3</span>;

  enum PhoneType {
    MOBILE =<span class="number"> 0</span>;
    HOME =<span class="number"> 1</span>;
    WORK =<span class="number"> 2</span>;
  }

  message PhoneNumber {
    required <span class="typename">string</span> number =<span class="number"> 1</span>;
    optional PhoneType <span class="keyword">type</span> =<span class="number"> 2</span> [<span class="keyword">default</span> = HOME];
  }

  repeated PhoneNumber phone =<span class="number"> 4</span>;
}

<span class="comment">// Our address book file is just one of these.</span>
message AddressBook {
  repeated Person person =<span class="number"> 1</span>;
}
</pre></td></tr></table></figure><br>    <a name="addressbook_proto_piqi"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="code"><pre><span class="preprocessor">.protobuf</span>-package <span class="string">"tutorial"</span>

<span class="preprocessor">.record</span> [
    <span class="preprocessor">.name</span> person
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> name
        <span class="preprocessor">.type</span> string
        <span class="preprocessor">.code</span> <span class="number">1</span>
    ]
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> id
        <span class="preprocessor">.type</span> protobuf-int32
        <span class="preprocessor">.code</span> <span class="number">2</span>
    ]
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> email
        <span class="preprocessor">.type</span> string
        <span class="preprocessor">.optional</span>
        <span class="preprocessor">.code</span> <span class="number">3</span>
    ]
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> phone
        <span class="preprocessor">.type</span> person-phone-number
        <span class="preprocessor">.repeated</span>
        <span class="preprocessor">.code</span> <span class="number">4</span>
    ]
]

<span class="preprocessor">.record</span> [
    <span class="preprocessor">.name</span> person-phone-number
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> number
        <span class="preprocessor">.type</span> string
        <span class="preprocessor">.code</span> <span class="number">1</span>
    ]
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> type
        <span class="preprocessor">.type</span> person-phone-type
        <span class="preprocessor">.optional</span>
        <span class="preprocessor">.default</span><span class="preprocessor">.home</span>
        <span class="preprocessor">.code</span> <span class="number">2</span>
    ]
]

<span class="preprocessor">.enum</span> [
    <span class="preprocessor">.name</span> person-phone-type
    <span class="preprocessor">.option</span> [
        <span class="preprocessor">.name</span> mobile
        <span class="preprocessor">.code</span> <span class="number">0</span>
        <span class="preprocessor">.protobuf</span>-name <span class="string">"person_mobile"</span>
    ]
    <span class="preprocessor">.option</span> [
        <span class="preprocessor">.name</span> home
        <span class="preprocessor">.code</span> <span class="number">1</span>
        <span class="preprocessor">.protobuf</span>-name <span class="string">"person_home"</span>
    ]
    <span class="preprocessor">.option</span> [
        <span class="preprocessor">.name</span> work
        <span class="preprocessor">.code</span> <span class="number">2</span>
        <span class="preprocessor">.protobuf</span>-name <span class="string">"person_work"</span>
    ]
]

<span class="preprocessor">.record</span> [
    <span class="preprocessor">.name</span> address-book
    <span class="preprocessor">.field</span> [
        <span class="preprocessor">.name</span> person
        <span class="preprocessor">.type</span> person
        <span class="preprocessor">.repeated</span>
        <span class="preprocessor">.code</span> <span class="number">1</span>
    ]
]
</pre></td></tr></table></figure><br>    <a name="addressbook_proto_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="keyword">type</span> person <span class="subst">=</span>
  {
    <span class="subst">-</span> name <span class="tag">:: string</span>()
    <span class="subst">-</span> id <span class="tag">:: protobuf</span><span class="attribute">-int32</span>()
    <span class="subst">?</span> email <span class="tag">:: string</span>()
    <span class="subst">*</span> phone <span class="tag">:: person</span><span class="attribute">-phone</span><span class="attribute">-number</span>()
  }

<span class="keyword">type</span> person<span class="attribute">-phone</span><span class="attribute">-number</span> <span class="subst">=</span>
  {
    <span class="subst">-</span> number <span class="tag">:: string</span>()
    <span class="subst">?</span> <span class="keyword">type</span> <span class="tag">:: person</span><span class="attribute">-phone</span><span class="attribute">-type</span>() <span class="subst">=</span> <span class="built_in">.</span>home
  }

<span class="keyword">type</span> person<span class="attribute">-phone</span><span class="attribute">-type</span> <span class="subst">=</span>
    <span class="subst">|</span> mobile
    <span class="subst">|</span> home
    <span class="subst">|</span> work

<span class="keyword">type</span> address<span class="attribute">-book</span> <span class="subst">=</span>
  {
    <span class="subst">*</span> person <span class="tag">:: person</span>()
  }
</pre></td></tr></table></figure><br>####    addressbook.piq    ####<br><br><br>    <em>   <a href="#addressbook_piq_source">Source</a>
    </em>   <a href="#addressbook_piq_piq">Piq</a><br>    <em>   <a href="#addressbook_piq_json">JSON</a>
    </em>   <a href="#addressbook_piq_xml">XML</a><br>    <em>   <a href="#addressbook_piq_piq_embedded">Piq (with embedded Piqi)</a>
    </em>   <a href="#addressbook_piq_pib">Pib</a><br><a name="addressbook_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="code"><pre>
        :addressbook/address-book [

            <span class="preprocessor">.person</span> [
                <span class="preprocessor">.name</span> <span class="string">"J. Random Hacker"</span>
                <span class="preprocessor">.id</span> <span class="number">0</span>

                <span class="preprocessor">.email</span> <span class="string">"j.r.hacker@example.com"</span>

                <span class="preprocessor">.phone</span> [
                    <span class="preprocessor">.number</span> <span class="string">"(111) 123 45 67"</span> % phone is <span class="string">"home"</span> by default
                ]

                <span class="preprocessor">.phone</span> [
                    <span class="preprocessor">.number</span> <span class="string">"(222) 123 45 67"</span>
                    <span class="preprocessor">.mobile</span> % NOTE: this is a <span class="string">"shorthand"</span> for <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
                ]

                <span class="preprocessor">.phone</span> [
                    <span class="preprocessor">.number</span> <span class="string">"(333) 123 45 67"</span>
                    <span class="preprocessor">.work</span>
                ]

                % this is also valid (but not recormmended)
                <span class="preprocessor">.phone</span> [ <span class="string">"(444) 123 45 67"</span> <span class="preprocessor">.mobile</span> ]
            ]

            % it is possible to omit optional <span class="string">"email"</span> field
            % <span class="keyword">and</span> repeated <span class="string">"phone"</span> field
            <span class="preprocessor">.person</span> [
                <span class="preprocessor">.name</span> <span class="string">"Joe User"</span>
                <span class="preprocessor">.id</span> <span class="number">1</span>

                % it is possible to omit optional <span class="string">"email"</span> field
                % <span class="keyword">and</span> repeated <span class="string">"phone"</span> field
            ]

            % ... <span class="keyword">or</span> even omit labels for the required fields (not recommended style
            % though)
            <span class="preprocessor">.person</span> [ <span class="string">"Joe User Jr"</span> <span class="number">2</span> ]

            % <span class="keyword">or</span> even like that
            <span class="preprocessor">.person</span> [
                <span class="string">"Joe User II"</span>
                <span class="number">3</span>
                <span class="string">"joe.user@example.com"</span>
                <span class="preprocessor">.phone</span> [ <span class="string">"(444) 123 45 67"</span> ]
                <span class="preprocessor">.phone</span> [ <span class="string">"(555) 123 45 67"</span> <span class="preprocessor">.work</span> ]
            ]
        ]
</pre></td></tr></table></figure><br><a name="addressbook_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="code"><pre>:addressbook/address-book [
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"J. Random Hacker"</span>
        <span class="preprocessor">.id</span> <span class="number">0</span>
        <span class="preprocessor">.email</span> <span class="string">"j.r.hacker@example.com"</span>
        <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(111) 123 45 67"</span> ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(222) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
        ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(333) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
        ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(444) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
        ]
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User"</span>
        <span class="preprocessor">.id</span> <span class="number">1</span>
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User Jr"</span>
        <span class="preprocessor">.id</span> <span class="number">2</span>
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User II"</span>
        <span class="preprocessor">.id</span> <span class="number">3</span>
        <span class="preprocessor">.email</span> <span class="string">"joe.user@example.com"</span>
        <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(444) 123 45 67"</span> ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(555) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
        ]
    ]
]
</pre></td></tr></table></figure><br><a name="addressbook_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"addressbook/address-book"</span></span>,
  "<span class="attribute">person</span>": <span class="value">[
    {
      "<span class="attribute">name</span>": <span class="value"><span class="string">"J. Random Hacker"</span></span>,
      "<span class="attribute">id</span>": <span class="value"><span class="number">0</span></span>,
      "<span class="attribute">email</span>": <span class="value"><span class="string">"j.r.hacker@example.com"</span></span>,
      "<span class="attribute">phone</span>": <span class="value">[
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(111) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"home"</span> </span>},
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(222) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"mobile"</span> </span>},
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(333) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"work"</span> </span>},
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(444) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"mobile"</span> </span>}
      ]
    </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"Joe User"</span></span>, "<span class="attribute">id</span>": <span class="value"><span class="number">1</span> </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"Joe User Jr"</span></span>, "<span class="attribute">id</span>": <span class="value"><span class="number">2</span> </span>},
    {
      "<span class="attribute">name</span>": <span class="value"><span class="string">"Joe User II"</span></span>,
      "<span class="attribute">id</span>": <span class="value"><span class="number">3</span></span>,
      "<span class="attribute">email</span>": <span class="value"><span class="string">"joe.user@example.com"</span></span>,
      "<span class="attribute">phone</span>": <span class="value">[
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(444) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"home"</span> </span>},
        { "<span class="attribute">number</span>": <span class="value"><span class="string">"(555) 123 45 67"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"work"</span> </span>}
      ]
    </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="addressbook_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">person</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>J. Random Hacker<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">id</span>&gt;</span>0<span class="tag">&lt;/<span class="title">id</span>&gt;</span>
    <span class="tag">&lt;<span class="title">email</span>&gt;</span>j.r.hacker@example.com<span class="tag">&lt;/<span class="title">email</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(111) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>home<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(222) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>mobile<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(333) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>work<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(444) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>mobile<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">person</span>&gt;</span>
  <span class="tag">&lt;<span class="title">person</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>Joe User<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">id</span>&gt;</span>1<span class="tag">&lt;/<span class="title">id</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">person</span>&gt;</span>
  <span class="tag">&lt;<span class="title">person</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>Joe User Jr<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">id</span>&gt;</span>2<span class="tag">&lt;/<span class="title">id</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">person</span>&gt;</span>
  <span class="tag">&lt;<span class="title">person</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>Joe User II<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">id</span>&gt;</span>3<span class="tag">&lt;/<span class="title">id</span>&gt;</span>
    <span class="tag">&lt;<span class="title">email</span>&gt;</span>joe.user@example.com<span class="tag">&lt;/<span class="title">email</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(444) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>home<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
    <span class="tag">&lt;<span class="title">phone</span>&gt;</span>
      <span class="tag">&lt;<span class="title">number</span>&gt;</span>(555) 123 45 67<span class="tag">&lt;/<span class="title">number</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>work<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">phone</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">person</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="addressbook_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
</pre></td><td class="code"><pre>:piqi [
    <span class="preprocessor">.module</span> addressbook
    <span class="preprocessor">.protobuf</span>-package <span class="string">"tutorial"</span>
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> person
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> name
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.code</span> <span class="number">1</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> id
            <span class="preprocessor">.type</span> protobuf-int32
            <span class="preprocessor">.code</span> <span class="number">2</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> email
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.code</span> <span class="number">3</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> phone
            <span class="preprocessor">.type</span> person-phone-number
            <span class="preprocessor">.repeated</span>
            <span class="preprocessor">.code</span> <span class="number">4</span>
        ]
    ]
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> person-phone-number
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> number
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.code</span> <span class="number">1</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> type
            <span class="preprocessor">.type</span> person-phone-type
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.default</span><span class="preprocessor">.home</span>
            <span class="preprocessor">.code</span> <span class="number">2</span>
        ]
    ]
    <span class="preprocessor">.enum</span> [
        <span class="preprocessor">.name</span> person-phone-type
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> mobile
            <span class="preprocessor">.protobuf</span>-name <span class="string">"person_mobile"</span>
            <span class="preprocessor">.code</span> <span class="number">0</span>
        ]
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> home
            <span class="preprocessor">.protobuf</span>-name <span class="string">"person_home"</span>
            <span class="preprocessor">.code</span> <span class="number">1</span>
        ]
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> work
            <span class="preprocessor">.protobuf</span>-name <span class="string">"person_work"</span>
            <span class="preprocessor">.code</span> <span class="number">2</span>
        ]
    ]
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> address-book
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> person
            <span class="preprocessor">.type</span> person
            <span class="preprocessor">.repeated</span>
            <span class="preprocessor">.code</span> <span class="number">1</span>
        ]
    ]
]

:addressbook/address-book [
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"J. Random Hacker"</span>
        <span class="preprocessor">.id</span> <span class="number">0</span>
        <span class="preprocessor">.email</span> <span class="string">"j.r.hacker@example.com"</span>
        <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(111) 123 45 67"</span> ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(222) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
        ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(333) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
        ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(444) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
        ]
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User"</span>
        <span class="preprocessor">.id</span> <span class="number">1</span>
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User Jr"</span>
        <span class="preprocessor">.id</span> <span class="number">2</span>
    ]
    <span class="preprocessor">.person</span> [
        <span class="preprocessor">.name</span> <span class="string">"Joe User II"</span>
        <span class="preprocessor">.id</span> <span class="number">3</span>
        <span class="preprocessor">.email</span> <span class="string">"joe.user@example.com"</span>
        <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(444) 123 45 67"</span> ]
        <span class="preprocessor">.phone</span> [
            <span class="preprocessor">.number</span> <span class="string">"(555) 123 45 67"</span>
            <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
        ]
    ]
]
</pre></td></tr></table></figure><br><a name="addressbook_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f27 0a09 7069 7169 2d74 7970  .....'..piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 1861 6464 7265 7373 626f 6f6b 2f61  e..addressbook/a</span>
<span class="attribute">0000020</span>: <span class="string">6464 7265 7373 2d62 6f6f 6b18 0212 ee01  ddress-book.....</span>
<span class="attribute">0000030</span>: <span class="string">0a7e 0a10 4a2e 2052 616e 646f 6d20 4861  .~..J. Random Ha</span>
<span class="attribute">0000040</span>: <span class="string">636b 6572 1000 1a16 6a2e 722e 6861 636b  cker....j.r.hack</span>
<span class="attribute">0000050</span>: <span class="string">6572 4065 7861 6d70 6c65 2e63 6f6d 2211  er@example.com".</span>
<span class="attribute">0000060</span>: <span class="string">0a0f 2831 3131 2920 3132 3320 3435 2036  ..(111) 123 45 6</span>
<span class="attribute">0000070</span>: <span class="string">3722 130a 0f28 3232 3229 2031 3233 2034  7"...(222) 123 4</span>
<span class="attribute">0000080</span>: <span class="string">3520 3637 1000 2213 0a0f 2833 3333 2920  5 67.."...(333) </span>
<span class="attribute">0000090</span>: <span class="string">3132 3320 3435 2036 3710 0222 130a 0f28  123 45 67.."...(</span>
<span class="attribute">00000a0</span>: <span class="string">3434 3429 2031 3233 2034 3520 3637 1000  444) 123 45 67..</span>
<span class="attribute">00000b0</span>: <span class="string">0a0c 0a08 4a6f 6520 5573 6572 1001 0a0f  ....Joe User....</span>
<span class="attribute">00000c0</span>: <span class="string">0a0b 4a6f 6520 5573 6572 204a 7210 020a  ..Joe User Jr...</span>
<span class="attribute">00000d0</span>: <span class="string">4d0a 0b4a 6f65 2055 7365 7220 4949 1003  M..Joe User II..</span>
<span class="attribute">00000e0</span>: <span class="string">1a14 6a6f 652e 7573 6572 4065 7861 6d70  ..joe.user@examp</span>
<span class="attribute">00000f0</span>: <span class="string">6c65 2e63 6f6d 2211 0a0f 2834 3434 2920  le.com"...(444) </span>
<span class="attribute">0000100</span>: <span class="string">3132 3320 3435 2036 3722 130a 0f28 3535  123 45 67"...(55</span>
<span class="attribute">0000110</span>: <span class="string">3529 2031 3233 2034 3520 3637 1002       5) 123 45 67..</span>
</pre></td></tr></table></figure>

<h3 id="Person_example">Person example</h3>
<pre><code>            这个例子与前一个类似,但是_person_数据类型是直接在<span class="escape">`p</span>erson.piqi<span class="escape">`中</span>定义的,而不是从 <span class="escape">`.</span>proto<span class="escape">`标</span>准中转换而来.  
    <span class="escape">`p</span>erson.piq<span class="escape">` </span>是_person_ 的一个实例.  
</code></pre><h4 id="person-piq">person.piq</h4>
<ul>
<li><a href="#person_piq_source">Source</a></li>
<li><a href="#person_piqi_proto">Proto</a></li>
<li><a href="#person_piq_json">JSON</a></li>
<li><a href="#person_piq_xml">XML</a></li>
<li><a href="#person_piqi_light">Piqi-light</a></li>
</ul>
<p><a name="person_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="code"><pre>
        % definition <span class="keyword">of</span> a <span class="type">record</span> type
        .<span class="type">record</span> [
            .<span class="property">name</span> person      % <span class="type">record</span> <span class="property">name</span>
            .field [
                .<span class="property">name</span> <span class="property">name</span>    % field <span class="property">name</span>
                .type <span class="type">string</span>  % field type
            ]
            .field [
                .<span class="property">name</span> <span class="property">id</span>
                .type int
            ]
            .field [
                .<span class="property">name</span> email
                .type <span class="type">string</span>
                .optional     % field <span class="keyword">is</span> optional
            ]
            .field [
                .<span class="property">name</span> phone
                .type phone-<span class="type">number</span>
                .repeated     % field can be repeated <span class="number">0</span> <span class="keyword">or</span> more <span class="keyword">times</span>
            ]
        ]

        .<span class="type">record</span> [
            .<span class="property">name</span> phone-<span class="type">number</span>
            .field [
                .<span class="property">name</span> <span class="type">number</span>
                .type <span class="type">string</span>
            ]
            .field [
                .<span class="property">name</span> type
                .type phone-type
                .optional
                .default.home  % default value <span class="keyword">for</span> an optional field

                % <span class="string">".default.home"</span> <span class="keyword">is</span> a shorthand <span class="keyword">for</span> <span class="string">".default (.home)"</span>, <span class="keyword">where</span>
                % <span class="string">".home"</span> <span class="keyword">is</span> a value <span class="keyword">of</span> <span class="keyword">the</span> enum type defined <span class="keyword">below</span>
            ]
        ]

        % definition <span class="keyword">of</span> an enum type
        .enum [
            .<span class="property">name</span> phone-type
            .option [ .<span class="property">name</span> mobile ]
            .option [ .<span class="property">name</span> home ]
            .option [ .<span class="property">name</span> work ]
        ]
</pre></td></tr></table></figure><br><a name="person_piqi_proto"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre>message person {
    required <span class="type">string</span> <span class="property">name</span> = <span class="number">1</span>;
    required sint32 <span class="property">id</span> = <span class="number">2</span>;
    optional <span class="type">string</span> email = <span class="number">3</span>;
    repeated phone_number phone = <span class="number">4</span>;
}

message phone_number {
    required <span class="type">string</span> <span class="type">number</span> = <span class="number">1</span>;
    optional phone_type type = <span class="number">2</span> [default = home];
}

enum phone_type {
    mobile = <span class="number">1</span>;
    home = <span class="number">2</span>;
    work = <span class="number">3</span>;
}
</pre></td></tr></table></figure><br><a name="person_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi"</span></span>,
  "<span class="attribute">module</span>": <span class="value"><span class="string">"person"</span></span>,
  "<span class="attribute">typedef</span>": <span class="value">[
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"person"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"name"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"id"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"email"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"phone"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"phone-number"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"repeated"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"phone-number"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"number"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          {
            "<span class="attribute">name</span>": <span class="value"><span class="string">"type"</span></span>,
            "<span class="attribute">type</span>": <span class="value"><span class="string">"phone-type"</span></span>,
            "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span></span>,
            "<span class="attribute">default</span>": <span class="value"><span class="string">"home"</span>
          </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">enum</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"phone-type"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"mobile"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"home"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"work"</span> </span>}
        ]
      </span>}
    </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="person_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">module</span>&gt;</span>person<span class="tag">&lt;/<span class="title">module</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>person<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>name<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>string<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>id<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>email<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>string<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>phone<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>phone-number<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>repeated<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>phone-number<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>number<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>string<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>type<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>phone-type<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
        <span class="tag">&lt;<span class="title">default</span>&gt;</span>home<span class="tag">&lt;/<span class="title">default</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">enum</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>phone-type<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>mobile<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>home<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>work<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">enum</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="person_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre>type person =
  {
<span class="code">    - name :: string()</span>
<span class="code">    - id :: int()</span>
<span class="code">    ? email :: string()</span>
<span class="code">    * phone :: phone-number()</span>
  }

type phone-number =
  {
<span class="code">    - number :: string()</span>
<span class="code">    ? type :: phone-type() = .home</span>
  }

type phone-type =
<span class="code">    | mobile</span>
<span class="code">    | home</span>
<span class="code">    | work</span>

<span class="header">####    person.piq    ####</span>

<span class="bullet">*   </span>[<span class="link_label">Source</span>](<span class="link_url">#person_piq_source</span>)
<span class="bullet">*   </span>[<span class="link_label">Piq</span>](<span class="link_url">#person_piq_piq</span>)
<span class="bullet">*   </span>[<span class="link_label">JSON</span>](<span class="link_url">#person_piq_json</span>)
<span class="bullet">*   </span>[<span class="link_label">XML</span>](<span class="link_url">#person_piq_xml</span>)
<span class="bullet">*   </span>[<span class="link_label">Piq (with embedded Piqi)</span>](<span class="link_url">#person_piq_piq_embedded</span>)
<span class="bullet">*   </span>[<span class="link_label">Pib</span>](<span class="link_url">#person_piq_pib</span>)

<span class="xml"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">name</span>=<span class="value">"person_piq_source"</span>/&gt;</span></span>
</pre></td></tr></table></figure><br>        % this is an object of type “person” which is defined in module “person”<br>        :person/person [<br>            .name “J. Random Hacker”<br>            .id 0<br><br>            .email “j.r.hacker@example.com”<br><br>            .phone [<br>                .number “(111) 123 45 67”<br>                % NOTE: phone is “home” by default<br>            ]<br><br>            .phone [<br>                .number “(222) 123 45 67”<br>                .mobile<br>            ]<br><br>            .phone [<br>                .number “(333) 123 45 67”<br>                .work<br>            ]<br>        ]<br><br>        % another object of the same type<br>        :person/person [<br>            .name “Joe User”<br>            .id 1<br><br>            % Joe User doesn’t have an email<br><br>            .phone [ “(444) 123 45 67” ]<br>            .phone [ “(555) 123 45 67” .work ]<br>        ]<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">a</span> <span class="attribute">name</span>=<span class="value">"person_piq_piq"</span>/&gt;</span>
</pre></td></tr></table></figure><br>        :person/person [<br>            .name “J. Random Hacker”<br>            .id 0<br>            .email “j.r.hacker@example.com”<br>            .phone [ .number “(111) 123 45 67” ]<br>            .phone [<br>                .number “(222) 123 45 67”<br>                .type.mobile<br>            ]<br>            .phone [<br>                .number “(333) 123 45 67”<br>                .type.work<br>            ]<br>        ]<br><br>        :person/person [<br>            .name “Joe User”<br>            .id 1<br>            .phone [ .number “(444) 123 45 67” ]<br>            .phone [<br>                .number “(555) 123 45 67”<br>                .type.work<br>            ]<br>        ]<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">a</span> <span class="attribute">name</span>=<span class="value">"person_piq_json"</span>/&gt;</span>
</pre></td></tr></table></figure><br>        {<br>          “piqi_type”: “person/person”,<br>          “name”: “J. Random Hacker”,<br>          “id”: 0,<br>          “email”: “j.r.hacker@example.com”,<br>          “phone”: [<br>            { “number”: “(111) 123 45 67”, “type”: “home” },<br>            { “number”: “(222) 123 45 67”, “type”: “mobile” },<br>            { “number”: “(333) 123 45 67”, “type”: “work” }<br>          ]<br>        }<br><br>        {<br>          “piqi_type”: “person/person”,<br>          “name”: “Joe User”,<br>          “id”: 1,<br>          “phone”: [<br>            { “number”: “(444) 123 45 67”, “type”: “home” },<br>            { “number”: “(555) 123 45 67”, “type”: “work” }<br>          ]<br>        }<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">a</span> <span class="attribute">name</span>=<span class="value">"person_piq_xml"</span>/&gt;</span>
</pre></td></tr></table></figure><br>        &lt;?xml version=”1.0” encoding=”UTF-8”?&gt;<br>        <value><br>          <name>J. Random Hacker</name><br>          <id>0</id><br>          <email>j.r.hacker@example.com</email><br>          <phone><br>            <number>(111) 123 45 67</number><br>            <type>home</type><br>          </phone><br>          <phone><br>            <number>(222) 123 45 67</number><br>            <type>mobile</type><br>          </phone><br>          <phone><br>            <number>(333) 123 45 67</number><br>            <type>work</type><br>          </phone><br>        </value><br><br>        &lt;?xml version=”1.0” encoding=”UTF-8”?&gt;<br>        <value><br>          <name>Joe User</name><br>          <id>1</id><br>          <phone><br>            <number>(444) 123 45 67</number><br>            <type>home</type><br>          </phone><br>          <phone><br>            <number>(555) 123 45 67</number><br>            <type>work</type><br>          </phone><br>        </value><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre></td><td class="code"><pre>&lt;a name=<span class="string">"person_piq_piq_embedded"</span>/&gt;

        :piqi [
            <span class="preprocessor">.module</span> person
            <span class="preprocessor">.record</span> [
                <span class="preprocessor">.name</span> person
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> name
                    <span class="preprocessor">.type</span> string
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> id
                    <span class="preprocessor">.type</span> int
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> email
                    <span class="preprocessor">.type</span> string
                    <span class="preprocessor">.optional</span>
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> phone
                    <span class="preprocessor">.type</span> phone-number
                    <span class="preprocessor">.repeated</span>
                ]
            ]
            <span class="preprocessor">.record</span> [
                <span class="preprocessor">.name</span> phone-number
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> number
                    <span class="preprocessor">.type</span> string
                ]
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.name</span> type
                    <span class="preprocessor">.type</span> phone-type
                    <span class="preprocessor">.optional</span>
                    <span class="preprocessor">.default</span><span class="preprocessor">.home</span>
                ]
            ]
            <span class="preprocessor">.enum</span> [
                <span class="preprocessor">.name</span> phone-type
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> mobile ]
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> home ]
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> work ]
            ]
        ]

        :person/person [
            <span class="preprocessor">.name</span> <span class="string">"J. Random Hacker"</span>
            <span class="preprocessor">.id</span> <span class="number">0</span>
            <span class="preprocessor">.email</span> <span class="string">"j.r.hacker@example.com"</span>
            <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(111) 123 45 67"</span> ]
            <span class="preprocessor">.phone</span> [
                <span class="preprocessor">.number</span> <span class="string">"(222) 123 45 67"</span>
                <span class="preprocessor">.type</span><span class="preprocessor">.mobile</span>
            ]
            <span class="preprocessor">.phone</span> [
                <span class="preprocessor">.number</span> <span class="string">"(333) 123 45 67"</span>
                <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
            ]
        ]

        :person/person [
            <span class="preprocessor">.name</span> <span class="string">"Joe User"</span>
            <span class="preprocessor">.id</span> <span class="number">1</span>
            <span class="preprocessor">.phone</span> [ <span class="preprocessor">.number</span> <span class="string">"(444) 123 45 67"</span> ]
            <span class="preprocessor">.phone</span> [
                <span class="preprocessor">.number</span> <span class="string">"(555) 123 45 67"</span>
                <span class="preprocessor">.type</span><span class="preprocessor">.work</span>
            ]
        ]
</pre></td></tr></table></figure><br><a name="person_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f1c 0a09 7069 7169 2d74 7970  ........piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 0d70 6572 736f 6e2f 7065 7273 6f6e  e..person/person</span>
<span class="attribute">0000020</span>: <span class="string">1802 1269 0a10 4a2e 2052 616e 646f 6d20  ...i..J. Random </span>
<span class="attribute">0000030</span>: <span class="string">4861 636b 6572 1000 1a16 6a2e 722e 6861  Hacker....j.r.ha</span>
<span class="attribute">0000040</span>: <span class="string">636b 6572 4065 7861 6d70 6c65 2e63 6f6d  cker@example.com</span>
<span class="attribute">0000050</span>: <span class="string">2211 0a0f 2831 3131 2920 3132 3320 3435  "...(111) 123 45</span>
<span class="attribute">0000060</span>: <span class="string">2036 3722 130a 0f28 3232 3229 2031 3233   67"...(222) 123</span>
<span class="attribute">0000070</span>: <span class="string">2034 3520 3637 1001 2213 0a0f 2833 3333   45 67.."...(333</span>
<span class="attribute">0000080</span>: <span class="string">2920 3132 3320 3435 2036 3710 0312 340a  ) 123 45 67...4.</span>
<span class="attribute">0000090</span>: <span class="string">084a 6f65 2055 7365 7210 0222 110a 0f28  .Joe User.."...(</span>
<span class="attribute">00000a0</span>: <span class="string">3434 3429 2031 3233 2034 3520 3637 2213  444) 123 45 67".</span>
<span class="attribute">00000b0</span>: <span class="string">0a0f 2835 3535 2920 3132 3320 3435 2036  ..(555) 123 45 6</span>
<span class="attribute">00000c0</span>: <span class="string">3710 03                                  7..</span>
</pre></td></tr></table></figure>

<h3 id="用户自定义Piqi数据类型">用户自定义Piqi数据类型</h3>
<pre><code>    <span class="escape">`d</span>ef.piqi<span class="escape">` </span>包含了多种自定义数据类型, 诸如records, variants, enums, lists <span class="literal">and</span> aliases. 
    <span class="escape">`f</span>lag.piq<span class="escape">` </span>和 <span class="escape">`l</span>ist.piq<span class="escape">` </span>是在<span class="escape">`d</span>ef.piqi<span class="escape">`定</span>义的多种数据类型的范例.
</code></pre><h4 id="def-piqi">def.piqi</h4>
<ul>
<li><a href="#def_piqi_source">Source</a></li>
<li><a href="#def_piqi_proto">Piqi.Proto</a></li>
<li><a href="#def_piqi_json">Piqi.JSON</a></li>
<li><a href="#def_piqi_xml">Piqi.XML</a></li>
<li><a href="#def_piqi_light">Piqi-light</a></li>
</ul>
<p><a name="def_piqi_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
</pre></td><td class="code"><pre>
        % this <span class="keyword">is</span> a <span class="type">record</span> definition
        .<span class="type">record</span> [
            .<span class="property">name</span> r

            % required <span class="type">integer</span> field
            .field [
                .<span class="property">name</span> i
                .type int

                % NOTE: fields are <span class="string">"required"</span> <span class="keyword">by</span> default; one can specify <span class="keyword">it</span> explicitly:
                %.required
            ]

            % optional <span class="type">string</span> field
            .field [
                .<span class="property">name</span> s
                .type <span class="type">string</span>
                .optional
            ]

            % optional binary field <span class="keyword">with</span> default value (NOTE: default values may only be
            % specified <span class="keyword">for</span> optional fields)
            .field [
                .<span class="property">name</span> b
                .type binary
                .optional
                .default <span class="string">"abc \xff\x00"</span>
            ]

            % repeated floating point field
            .field [
                .<span class="property">name</span> f
                .type float
                .repeated
            ]

            % this <span class="keyword">is</span> a flag, <span class="keyword">its</span> presence <span class="keyword">in</span> <span class="keyword">the</span> <span class="type">record</span> <span class="keyword">is</span> meaningful <span class="keyword">by</span> itself, <span class="keyword">it</span>
            % doesn't carry any additional value; <span class="keyword">in</span> fact, <span class="keyword">the</span> value can be omitted <span class="keyword">or</span>
            % specified <span class="keyword">as</span> <span class="constant">true</span> <span class="keyword">or</span> <span class="constant">false</span> <span class="comment">-- see flag.piq for examples and explanations</span>
            .field [
                .<span class="property">name</span> flag

                % NOTE: flags must be defined <span class="keyword">as</span> .optional; obviously, .default value
                % doesn't make any sense <span class="keyword">for</span> flags <span class="keyword">and</span> thus <span class="keyword">not</span> allowed
                .optional 
            ]

            % a <span class="type">boolean</span> field
            .field [
                % <span class="keyword">in</span> this case, <span class="keyword">the</span> <span class="property">name</span> <span class="keyword">of</span> <span class="keyword">the</span> field will be taken <span class="keyword">as</span> <span class="keyword">the</span> <span class="property">name</span> <span class="keyword">of</span> type
                % which <span class="keyword">is</span> <span class="string">"bool"</span>

                .type bool
                .optional
            ]

            % optional <span class="string">"self"</span>
            .field [
                .<span class="property">name</span> self 
                .type r     % here referencing <span class="keyword">the</span> <span class="type">record</span> we're defining now
                .optional
            ]

            % another optional filed which references type defined <span class="keyword">below</span>
            .field [
                % NOTE: <span class="keyword">if</span> field <span class="property">name</span> <span class="keyword">and</span> type <span class="property">name</span> are <span class="keyword">the</span> same, field <span class="property">name</span> may
                % be omitted
                .type v
                .optional
            ]
        ]

        .enum [
            .<span class="property">name</span> e
            .option [ .<span class="property">name</span> a .protobuf-<span class="property">name</span> <span class="string">"e_a"</span> ]
            .option [ .<span class="property">name</span> b ]
            .option [ .<span class="property">name</span> c ]
        ]

        % definition <span class="keyword">of</span> a variant
        .variant [
            .<span class="property">name</span> v

            .option [
                .<span class="property">name</span> i
                .type int
            ]

            .option [
                % NOTE: <span class="keyword">if</span> option <span class="property">name</span> <span class="keyword">and</span> option type are <span class="keyword">the</span> same, field <span class="property">name</span> may
                % be omitted
                .type r
            ]

            .option [
                .type e
            ]

            % options may <span class="keyword">not</span> be associated <span class="keyword">with</span> any types, such options are similar <span class="keyword">to</span>
            % those used <span class="keyword">in</span> enums
            .option [
                .<span class="property">name</span> flag
            ]

            % those used <span class="keyword">in</span> enums
            .option [
                .<span class="property">name</span> l
                .type v-<span class="type">list</span>    % see <span class="keyword">below</span>
            ]
        ]

        % an <span class="type">alias</span>
        .<span class="type">alias</span> [
            .<span class="property">name</span> a
            .type v
        ]

        % just <span class="keyword">to</span> give an idea <span class="keyword">of</span> how <span class="keyword">it</span> can be used 
        .<span class="type">alias</span> [
            .<span class="property">name</span> uuid
            .type binary
        ]

        .<span class="type">alias</span> [
            .<span class="property">name</span> epoch-seconds
            .type uint64
        ]

        % <span class="type">list</span> <span class="keyword">of</span> v
        .<span class="type">list</span> [
            % NOTE: <span class="string">"-list"</span> suffix <span class="keyword">is</span> <span class="keyword">not</span> mandatory, however <span class="keyword">it</span> <span class="keyword">is</span> a style convention
            .<span class="property">name</span> v-<span class="type">list</span>
            .type v
        ]

        % <span class="type">list</span> <span class="keyword">of</span> built-<span class="keyword">in</span> type
        .<span class="type">list</span> [
            .<span class="property">name</span> int-<span class="type">list</span>
            .type int
        ]

        .<span class="type">list</span> [
            .<span class="property">name</span> int-<span class="type">list</span>-<span class="type">list</span>
            .type int-<span class="type">list</span>
        ]
</pre></td></tr></table></figure><br><a name="def_piqi_proto"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="code"><pre>
        message r {
            required sint32 i = <span class="number">1</span>;
            optional <span class="keyword">string</span> s = <span class="number">2</span>;
            optional bytes b = <span class="number">3</span> [<span class="keyword">default</span> = <span class="string">"abc \xff\x00"</span>];
            repeated <span class="keyword">double</span> f = <span class="number">4</span>;
            optional <span class="keyword">bool</span> flag = <span class="number">5</span>;
            optional <span class="keyword">bool</span> <span class="keyword">bool</span> = <span class="number">6</span>;
            optional r self = <span class="number">7</span>;
            optional v v = <span class="number">8</span>;
        }

        <span class="keyword">enum</span> e {
            e_a = <span class="number">1</span>;
            b = <span class="number">2</span>;
            c = <span class="number">3</span>;
        }

        message v {
            optional sint32 i = <span class="number">1</span>;
            optional r r = <span class="number">2</span>;
            optional e e = <span class="number">3</span>;
            optional <span class="keyword">bool</span> flag = <span class="number">4</span>;
            optional v_list l = <span class="number">5</span>;
        }

        message a {
            optional sint32 i = <span class="number">1</span>;
            optional r r = <span class="number">2</span>;
            optional e e = <span class="number">3</span>;
            optional <span class="keyword">bool</span> flag = <span class="number">4</span>;
            optional v_list l = <span class="number">5</span>;
        }

        message v_list {
            repeated v elem = <span class="number">1</span>;
        }

        message int_list {
            repeated sint32 elem = <span class="number">1</span>;
        }

        message int_list_list {
            repeated int_list elem = <span class="number">1</span>;
        }
</pre></td></tr></table></figure><br><a name="def_piqi_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi"</span></span>,
  "<span class="attribute">module</span>": <span class="value"><span class="string">"def"</span></span>,
  "<span class="attribute">typedef</span>": <span class="value">[
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"r"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"i"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"s"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>},
          {
            "<span class="attribute">name</span>": <span class="value"><span class="string">"b"</span></span>,
            "<span class="attribute">type</span>": <span class="value"><span class="string">"binary"</span></span>,
            "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span></span>,
            "<span class="attribute">default</span>": <span class="value"><span class="string">"YWJjIP8A"</span>
          </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"f"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"repeated"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"flag"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>},
          { "<span class="attribute">type</span>": <span class="value"><span class="string">"bool"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"self"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"r"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>},
          { "<span class="attribute">type</span>": <span class="value"><span class="string">"v"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">enum</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"e"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span></span>, "<span class="attribute">protobuf_name</span>": <span class="value"><span class="string">"e_a"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"b"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"c"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">variant</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"v"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"i"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>},
          { "<span class="attribute">type</span>": <span class="value"><span class="string">"r"</span> </span>},
          { "<span class="attribute">type</span>": <span class="value"><span class="string">"e"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"flag"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"l"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"v-list"</span> </span>}
        ]
      </span>}
    </span>},
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"v"</span> </span>} </span>},
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"uuid"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"binary"</span> </span>} </span>},
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"epoch-seconds"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"uint64"</span> </span>} </span>},
    { "<span class="attribute">list</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"v-list"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"v"</span> </span>} </span>},
    { "<span class="attribute">list</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"int-list"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>} </span>},
    { "<span class="attribute">list</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"int-list-list"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int-list"</span> </span>} </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="def_piqi_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">module</span>&gt;</span>def<span class="tag">&lt;/<span class="title">module</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>r<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>i<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>s<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>string<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>b<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>binary<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
        <span class="tag">&lt;<span class="title">default</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">default</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>f<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>float<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>repeated<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>flag<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>bool<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>self<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>r<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>v<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">enum</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>e<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">protobuf-name</span>&gt;</span>e_a<span class="tag">&lt;/<span class="title">protobuf-name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>b<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>c<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">enum</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">variant</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>v<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>i<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>r<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>e<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>flag<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>l<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>v-list<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">variant</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>v<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>uuid<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>binary<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>epoch-seconds<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>uint64<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">list</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>v-list<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>v<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">list</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">list</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>int-list<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">list</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">list</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>int-list-list<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>int-list<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">list</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="def_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="code"><pre><span class="class"><span class="keyword">type</span> <span class="title">r</span> =</span>
  {
    - i :: <span class="built_in">int</span>()
    ? s :: <span class="built_in">string</span>()
    ? b :: binary() = <span class="string">"abc \xff\x00"</span>
    * f :: <span class="built_in">float</span>()
    ? flag
    ? <span class="built_in">bool</span>()
    ? self :: r()
    ? v()
  }

<span class="class"><span class="keyword">type</span> <span class="title">e</span> =</span>
    | a
    | b
    | c

<span class="class"><span class="keyword">type</span> <span class="title">v</span> =</span>
    | i :: <span class="built_in">int</span>()
    | r()
    | e()
    | flag
    | l :: v-<span class="built_in">list</span>()

<span class="class"><span class="keyword">type</span> <span class="title">a</span> =</span> v()

<span class="class"><span class="keyword">type</span> <span class="title">uuid</span> =</span> binary()

<span class="class"><span class="keyword">type</span> <span class="title">epoch</span>-<span class="title">seconds</span> =</span> uint64()

<span class="class"><span class="keyword">type</span> <span class="title">v</span>-<span class="title">list</span> =</span> [ v() ]

<span class="class"><span class="keyword">type</span> <span class="title">int</span>-<span class="title">list</span> =</span> [ <span class="built_in">int</span>() ]

<span class="class"><span class="keyword">type</span> <span class="title">int</span>-<span class="title">list</span>-<span class="title">list</span> =</span> [ <span class="built_in">int</span>-<span class="built_in">list</span>() ]
</pre></td></tr></table></figure><br>####    flag.piq    ####<br><br><em>   <a href="#flag_piq_source">Source</a>
</em>   <a href="#flag_piq_piq">Piq</a><br><em>   <a href="#flag_piq_json">JSON</a>
</em>   <a href="#flag_piq_xml">XML</a><br><em>   <a href="#flag_piq_piq_embedded">Piq (with embedded Piqi)</a>
</em>   <a href="#flag_piq_pib">Pib</a><br><br><a name="flag_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>
        <span class="symbol">:def/r</span> [
            .i <span class="number">0</span>
            .flag
        ]

        <span class="symbol">:def/r</span> [
            .i <span class="number">0</span>

            % same as .flag
            .flag <span class="keyword">true</span>
        ]

        <span class="symbol">:def/r</span> [
            .i <span class="number">0</span>

            % same as <span class="keyword">if</span> the flag wasn<span class="string">'t present
            .flag false
        ]</span>
</pre></td></tr></table></figure><br><a name="flag_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="symbol">:def/r</span> [
    .i <span class="number">0</span>
    .flag
]

<span class="symbol">:def/r</span> [
    .i <span class="number">0</span>
    .flag
]

<span class="symbol">:def/r</span> [ .i <span class="number">0</span> ]
</pre></td></tr></table></figure><br><a name="flag_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span></span>, "<span class="attribute">flag</span>": <span class="value"><span class="literal">true</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span></span>, "<span class="attribute">flag</span>": <span class="value"><span class="literal">true</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/r"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="string">"YWJjIP8A"</span> </span>}
</pre></td></tr></table></figure><br><a name="flag_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;<span class="title">flag</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;<span class="title">flag</span>/&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>YWJjIP8A<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="flag_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
</pre></td><td class="code"><pre>:piqi [
    <span class="preprocessor">.module</span> def
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> r
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> s
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> b
            <span class="preprocessor">.type</span> binary
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.default</span> <span class="string">"abc \xff\x00"</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> f
            <span class="preprocessor">.type</span> float
            <span class="preprocessor">.repeated</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> flag
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> bool
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> self
            <span class="preprocessor">.type</span> r
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> v
            <span class="preprocessor">.optional</span>
        ]
    ]
    <span class="preprocessor">.enum</span> [
        <span class="preprocessor">.name</span> e
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> a
            <span class="preprocessor">.protobuf</span>-name <span class="string">"e_a"</span>
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> b ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> c ]
    ]
    <span class="preprocessor">.variant</span> [
        <span class="preprocessor">.name</span> v
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> r ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> e ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> flag ]
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> l
            <span class="preprocessor">.type</span> v-list
        ]
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> a
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> uuid
        <span class="preprocessor">.type</span> binary
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> epoch-seconds
        <span class="preprocessor">.type</span> uint64
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> v-list
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list
        <span class="preprocessor">.type</span> int
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list-list
        <span class="preprocessor">.type</span> int-list
    ]
]

:def/r [
    <span class="preprocessor">.i</span> <span class="number">0</span>
    <span class="preprocessor">.flag</span>
]

:def/r [
    <span class="preprocessor">.i</span> <span class="number">0</span>
    <span class="preprocessor">.flag</span>
]

:def/r [ <span class="preprocessor">.i</span> <span class="number">0</span> ]
</pre></td></tr></table></figure><br><a name="flag_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="number">0000000</span>: faff ffff <span class="number">0</span>f14 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0564</span> <span class="number">6566</span> <span class="number">2</span>f72 <span class="number">1802</span> <span class="number">1204</span> <span class="number">0800</span> <span class="number">2801</span>  e<span class="built_in">..</span>def/r<span class="attribute">...</span><span class="attribute">...</span>(<span class="built_in">.</span>
<span class="number">0000020</span>: <span class="number">1204</span> <span class="number">0800</span> <span class="number">2801</span> <span class="number">1202</span> <span class="number">0800</span>                 <span class="attribute">...</span><span class="built_in">.</span>(<span class="attribute">...</span><span class="built_in">..</span>
</pre></td></tr></table></figure>


<h4 id="list-piq">list.piq</h4>
<ul>
<li><a href="#list_piq_source">Source</a></li>
<li><a href="#list_piq_piq">Piq</a></li>
<li><a href="#list_piq_json">JSON</a></li>
<li><a href="#list_piq_xml">XML</a></li>
<li><a href="#list_piq_piq_embedded">Piq (with embedded Piqi)</a></li>
<li><a href="#list_piq_pib">Pib</a>   </li>
</ul>
<p><a name="list_piq_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="symbol">:def/int-list</span> []

<span class="symbol">:def/int-list</span> [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> ]

<span class="symbol">:def/int-list-list</span> [
    []
    [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ]
]
</pre></td></tr></table></figure><br><a name="list_piq_piq"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="symbol">:def/int-list</span> []

<span class="symbol">:def/int-list</span> [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> ]

<span class="symbol">:def/int-list-list</span> [
    []
    [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ]
]
</pre></td></tr></table></figure><br><a name="list_piq_json"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/int-list"</span></span>, "<span class="attribute">value</span>": <span class="value">[] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/int-list"</span></span>, "<span class="attribute">value</span>": <span class="value">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"def/int-list-list"</span></span>, "<span class="attribute">value</span>": <span class="value">[ [], [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ] ] </span>}
</pre></td></tr></table></figure><br><a name="list_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>/&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>1<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>2<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>3<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>4<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>5<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>/&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>
    <span class="tag">&lt;<span class="title">item</span>&gt;</span>1<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
    <span class="tag">&lt;<span class="title">item</span>&gt;</span>2<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
    <span class="tag">&lt;<span class="title">item</span>&gt;</span>3<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">item</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="list_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre></td><td class="code"><pre>:piqi [
    <span class="preprocessor">.module</span> def
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> r
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> s
            <span class="preprocessor">.type</span> string
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> b
            <span class="preprocessor">.type</span> binary
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.default</span> <span class="string">"abc \xff\x00"</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> f
            <span class="preprocessor">.type</span> float
            <span class="preprocessor">.repeated</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> flag
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> bool
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> self
            <span class="preprocessor">.type</span> r
            <span class="preprocessor">.optional</span>
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.type</span> v
            <span class="preprocessor">.optional</span>
        ]
    ]
    <span class="preprocessor">.enum</span> [
        <span class="preprocessor">.name</span> e
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> a
            <span class="preprocessor">.protobuf</span>-name <span class="string">"e_a"</span>
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> b ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> c ]
    ]
    <span class="preprocessor">.variant</span> [
        <span class="preprocessor">.name</span> v
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> i
            <span class="preprocessor">.type</span> int
        ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> r ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.type</span> e ]
        <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> flag ]
        <span class="preprocessor">.option</span> [
            <span class="preprocessor">.name</span> l
            <span class="preprocessor">.type</span> v-list
        ]
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> a
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> uuid
        <span class="preprocessor">.type</span> binary
    ]
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> epoch-seconds
        <span class="preprocessor">.type</span> uint64
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> v-list
        <span class="preprocessor">.type</span> v
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list
        <span class="preprocessor">.type</span> int
    ]
    <span class="preprocessor">.list</span> [
        <span class="preprocessor">.name</span> int-list-list
        <span class="preprocessor">.type</span> int-list
    ]
]

:def/int-list []

:def/int-list [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> ]

:def/int-list-list [
    []
    [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ]
]
</pre></td></tr></table></figure><br><a name="list_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="number">0000000</span>: faff ffff <span class="number">0</span>f1b <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0</span>c64 <span class="number">6566</span> <span class="number">2</span>f69 <span class="number">6e74</span> <span class="number">2</span>d6c <span class="number">6973</span> <span class="number">7418</span>  e<span class="built_in">..</span>def/int<span class="attribute">-list</span><span class="built_in">.</span>
<span class="number">0000020</span>: <span class="number">0212</span> <span class="number">0012</span> <span class="number">0</span>a08 <span class="number">0208</span> <span class="number">0408</span> <span class="number">0608</span> <span class="number">0808</span> <span class="number">0</span>afa  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000030</span>: ffff ff0f <span class="number">200</span>a <span class="number">0970</span> <span class="number">6971</span> <span class="number">692</span>d <span class="number">7479</span> <span class="number">7065</span>  <span class="attribute">...</span><span class="built_in">.</span> <span class="built_in">..</span>piqi<span class="attribute">-type</span>
<span class="number">0000040</span>: <span class="number">1211</span> <span class="number">6465</span> <span class="number">662</span>f <span class="number">696</span>e <span class="number">742</span>d <span class="number">6</span>c69 <span class="number">7374</span> <span class="number">2</span>d6c  <span class="built_in">..</span>def/int<span class="attribute">-list</span><span class="attribute">-l</span>
<span class="number">0000050</span>: <span class="number">6973</span> <span class="number">7418</span> <span class="number">031</span>a <span class="number">0</span>a0a <span class="number">000</span>a <span class="number">0608</span> <span class="number">0208</span> <span class="number">0408</span>  ist<span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000060</span>: <span class="number">06</span>                                       <span class="built_in">.</span>
</pre></td></tr></table></figure><br>###    Examples of Piqi functions    ###<br><br><br>        <code>function.piqi</code>包括了对Piqi函数定义的范例.<br>        <code>function.piq</code> 包括了函数定义的输入/输出/错误信息数据类型的范例<br><br>####    function.piqi    ####<br><br><br><em>   <a href="#function_piqi_source">Source</a>
</em>   <a href="#function_piqi_proto">Piqi.Proto</a><br><em>   <a href="#function_piqi_json">Piqi.JSON</a>
</em>   <a href="#function_piqi_xml">Piqi.XML</a><br><em>   <a href="#function_piqi_light">Piqi-light</a><br><br><a name="function_piqi_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
</pre></td><td class="code"><pre>
        % function with no input <span class="keyword">and</span> output parameters
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> foo
        ]

        % function with a record input parameter <span class="keyword">and</span> primitive output <span class="keyword">and</span> error
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> bar

            <span class="preprocessor">.input</span> [
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.type</span> int
                    <span class="preprocessor">.optional</span>
                ]
            ]
            <span class="preprocessor">.output</span> int
            <span class="preprocessor">.error</span> float
        ]

        % function with a record input that has a default value
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> baz

            <span class="preprocessor">.input</span><span class="preprocessor">.record</span> [
                <span class="preprocessor">.field</span> [
                    <span class="preprocessor">.type</span> int
                    <span class="preprocessor">.optional</span>
                    <span class="preprocessor">.default</span> <span class="number">10</span>
                ]
            ]
        ]

        % function with a variant input parameter
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> v

            <span class="preprocessor">.output</span><span class="preprocessor">.variant</span> [
                <span class="preprocessor">.option</span> [
                    <span class="preprocessor">.name</span> i
                    <span class="preprocessor">.type</span> int
                ]
                <span class="preprocessor">.option</span> [
                    <span class="preprocessor">.name</span> f
                    <span class="preprocessor">.type</span> float
                ]
            ]
        ]

        % function with an enum error parameter
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> e

            <span class="preprocessor">.error</span><span class="preprocessor">.enum</span> [
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> a ]
                <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> b ]
            ]
        ]

        % function with a list input parameter
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> l

            <span class="preprocessor">.input</span><span class="preprocessor">.list</span> [
                <span class="preprocessor">.type</span> int
            ]
        ]

        % function with an alias input parameter
        <span class="preprocessor">.function</span> [
            <span class="preprocessor">.name</span> a

            <span class="preprocessor">.input</span><span class="preprocessor">.alias</span> [
                <span class="preprocessor">.type</span> string
                <span class="preprocessor">.piq</span>-format<span class="preprocessor">.text</span>
            ]
        ]
</pre></td></tr></table></figure><br><a name="function_piqi_proto"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="code"><pre>
        <span class="keyword">message</span> bar_input {
            optional sint32 int = <span class="number">1</span>;
        }

        <span class="keyword">message</span> bar_output {
            required sint32 elem = <span class="number">1</span>;
        }

        <span class="keyword">message</span> bar_error {
            required double elem = <span class="number">1</span>;
        }

        <span class="keyword">message</span> baz_input {
            optional sint32 int = <span class="number">1</span> [default = <span class="number">10</span>];
        }

        <span class="keyword">message</span> v_output {
            optional sint32 i = <span class="number">1</span>;
            optional double f = <span class="number">2</span>;
        }

        <span class="keyword">message</span> e_error {
            enum e_error {
                a = <span class="number">1</span>;
                b = <span class="number">2</span>;
            };
            required e_error elem = <span class="number">1</span>;
        }

        <span class="keyword">message</span> l_input {
            repeated sint32 elem = <span class="number">1</span>;
        }

        <span class="keyword">message</span> a_input {
            required <span class="keyword">string</span> elem = <span class="number">1</span>;
        }
</pre></td></tr></table></figure><br><a name="function_piqi_json"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi"</span></span>,
  "<span class="attribute">module</span>": <span class="value"><span class="string">"function"</span></span>,
  "<span class="attribute">typedef</span>": <span class="value">[
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"bar-input"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[ { "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span> </span>} ]
      </span>}
    </span>},
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"bar-output"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>} </span>},
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"bar-error"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"float"</span> </span>} </span>},
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"baz-input"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[ { "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span></span>, "<span class="attribute">default</span>": <span class="value"><span class="number">10</span> </span>} ]
      </span>}
    </span>},
    {
      "<span class="attribute">variant</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"v-output"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"i"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"f"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"float"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">enum</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"e-error"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[ { "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span> </span>}, { "<span class="attribute">name</span>": <span class="value"><span class="string">"b"</span> </span>} ]
      </span>}
    </span>},
    { "<span class="attribute">list</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"l-input"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>} </span>},
    {
      "<span class="attribute">alias</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"a-input"</span></span>,
        "<span class="attribute">type</span>": <span class="value"><span class="string">"string"</span></span>,
        "<span class="attribute">piq_format</span>": <span class="value">{ "<span class="attribute">text</span>": <span class="value"><span class="literal">true</span> </span>}
      </span>}
    </span>}
  ]</span>,
  "<span class="attribute">function</span>": <span class="value">[
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"foo"</span> </span>},
    {
      "<span class="attribute">name</span>": <span class="value"><span class="string">"bar"</span></span>,
      "<span class="attribute">input</span>": <span class="value"><span class="string">"bar-input"</span></span>,
      "<span class="attribute">output</span>": <span class="value"><span class="string">"int"</span></span>,
      "<span class="attribute">error</span>": <span class="value"><span class="string">"float"</span>
    </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"baz"</span></span>, "<span class="attribute">input</span>": <span class="value"><span class="string">"baz-input"</span> </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"v"</span></span>, "<span class="attribute">output</span>": <span class="value"><span class="string">"v-output"</span> </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"e"</span></span>, "<span class="attribute">error</span>": <span class="value"><span class="string">"e-error"</span> </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"l"</span></span>, "<span class="attribute">input</span>": <span class="value"><span class="string">"l-input"</span> </span>},
    { "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span></span>, "<span class="attribute">input</span>": <span class="value"><span class="string">"a-input"</span> </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="function_piqi_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">module</span>&gt;</span>function<span class="tag">&lt;/<span class="title">module</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>bar-input<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>bar-output<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>bar-error<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>float<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>baz-input<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
        <span class="tag">&lt;<span class="title">default</span>&gt;</span>10<span class="tag">&lt;/<span class="title">default</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">variant</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>v-output<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>i<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>f<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>float<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">variant</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">enum</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>e-error<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
      <span class="tag">&lt;<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>b<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">enum</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">list</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>l-input<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">list</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>a-input<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>string<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
      <span class="tag">&lt;<span class="title">piq-format</span>&gt;</span>
        <span class="tag">&lt;<span class="title">text</span>/&gt;</span>
      <span class="tag">&lt;/<span class="title">piq-format</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>foo<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>bar<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span>&gt;</span>bar-input<span class="tag">&lt;/<span class="title">input</span>&gt;</span>
    <span class="tag">&lt;<span class="title">output</span>&gt;</span>int<span class="tag">&lt;/<span class="title">output</span>&gt;</span>
    <span class="tag">&lt;<span class="title">error</span>&gt;</span>float<span class="tag">&lt;/<span class="title">error</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>baz<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span>&gt;</span>baz-input<span class="tag">&lt;/<span class="title">input</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>v<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">output</span>&gt;</span>v-output<span class="tag">&lt;/<span class="title">output</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>e<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">error</span>&gt;</span>e-error<span class="tag">&lt;/<span class="title">error</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>l<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span>&gt;</span>l-input<span class="tag">&lt;/<span class="title">input</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
  <span class="tag">&lt;<span class="title">function</span>&gt;</span>
    <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span>&gt;</span>a-input<span class="tag">&lt;/<span class="title">input</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">function</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="function_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">foo</span></span>

<span class="function"><span class="keyword">function</span> <span class="title">bar</span></span>
    input =
      <span class="cell">{
        ? int()
      }</span>
    output = int()
    error = float()

<span class="function"><span class="keyword">function</span> <span class="title">baz</span></span>
    input =
      <span class="cell">{
        ? int() = <span class="number">10</span>
      }</span>

<span class="function"><span class="keyword">function</span> <span class="title">v</span></span>
    output =
        | <span class="built_in">i</span> :: int()
        | f :: float()

<span class="function"><span class="keyword">function</span> <span class="title">e</span></span>
    error =
        | a
        | b

<span class="function"><span class="keyword">function</span> <span class="title">l</span></span>
    input = <span class="matrix">[ int() ]</span>

<span class="function"><span class="keyword">function</span> <span class="title">a</span></span>
    input = string()
</pre></td></tr></table></figure><br>####    function.piq    ####

</a></a></a></a></a></em>   <a href="#function_piq_source">Source</a><br><em>   <a href="#function_piq_piq">Piq</a>
</em>   <a href="#function_piq_json">JSON</a><br><em>   <a href="#function_piq_xml">XML</a>
</em>   <a href="#function_piq_piq_embedded">Piq (with embedded Piqi)</a><br><em>   <a href="#function_piq_pib">Pib</a><br><br><a name="function_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre>% input/ouput/error of functions <span class="keyword">defined</span> <span class="keyword">in</span> function.piqi

<span class="symbol">:function/bar-input</span> [ <span class="number">10</span> ]
<span class="symbol">:function/bar-output</span> <span class="number">1</span>
<span class="symbol">:function/bar-error</span> <span class="number">100.0</span>

<span class="symbol">:function/baz-input</span> []

<span class="symbol">:function/v-output</span>.i <span class="number">0</span>
<span class="symbol">:function/v-output</span>.f <span class="number">100.0</span>

<span class="symbol">:function/e-error</span>.a
<span class="symbol">:function/e-error</span>.b

<span class="symbol">:function/l-input</span> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]

<span class="symbol">:function/a-input</span> <span class="comment"># foo</span>
</pre></td></tr></table></figure><br><a name="function_piq_piq"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="symbol">:function/bar-input</span> [ .int <span class="number">10</span> ]

<span class="symbol">:function/bar-output</span> <span class="number">1</span>

<span class="symbol">:function/bar-error</span> <span class="number">100.0</span>

<span class="symbol">:function/baz-input</span> []

<span class="symbol">:function/v-output</span>.i <span class="number">0</span>

<span class="symbol">:function/v-output</span>.f <span class="number">100.0</span>

<span class="symbol">:function/e-error</span>.a

<span class="symbol">:function/e-error</span>.b

<span class="symbol">:function/l-input</span> [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ]

<span class="symbol">:function/a-input</span> <span class="comment"># foo</span>
</pre></td></tr></table></figure><br><a name="function_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/bar-input"</span></span>, "<span class="attribute">int</span>": <span class="value"><span class="number">10</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/bar-output"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">1</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/bar-error"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="number">100.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/baz-input"</span></span>, "<span class="attribute">int</span>": <span class="value"><span class="number">10</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/v-output"</span></span>, "<span class="attribute">i</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/v-output"</span></span>, "<span class="attribute">f</span>": <span class="value"><span class="number">100.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/e-error"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"a"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/e-error"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"b"</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/l-input"</span></span>, "<span class="attribute">value</span>": <span class="value">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"function/a-input"</span></span>, "<span class="attribute">value</span>": <span class="value"><span class="string">"foo"</span> </span>}
</pre></td></tr></table></figure><br><a name="function_piq_xml"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">int</span>&gt;</span>10<span class="tag">&lt;/<span class="title">int</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>1<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>100.0<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">int</span>&gt;</span>10<span class="tag">&lt;/<span class="title">int</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">i</span>&gt;</span>0<span class="tag">&lt;/<span class="title">i</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">f</span>&gt;</span>100.0<span class="tag">&lt;/<span class="title">f</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>a<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>b<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>1<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>2<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>3<span class="tag">&lt;/<span class="title">item</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>foo<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="function_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
</pre></td><td class="code"><pre><span class="symbol">:piqi</span> [
    .<span class="keyword">module</span> function
    .function [ .name foo ]
    .function [
        .name bar
        .input [
            .field [
                .type int
                .optional
            ]
        ]
        .output int
        .error float
    ]
    .function [
        .name baz
        .input [
            .field [
                .type int
                .optional
                .default <span class="number">10</span>
            ]
        ]
    ]
    .function [
        .name v
        .output.variant [
            .option [
                .name i
                .type int
            ]
            .option [
                .name f
                .type float
            ]
        ]
    ]
    .function [
        .name e
        .error.enum [
            .option [ .name a ]
            .option [ .name b ]
        ]
    ]
    .function [
        .name l
        .input.list [ .type int ]
    ]
    .function [
        .name a
        .input.<span class="keyword">alias</span> [
            .type string
            .piq-format.text
        ]
    ]
]

<span class="symbol">:function/bar-input</span> [ .int <span class="number">10</span> ]

<span class="symbol">:function/bar-output</span> <span class="number">1</span>

<span class="symbol">:function/bar-error</span> <span class="number">100.0</span>

<span class="symbol">:function/baz-input</span> []

<span class="symbol">:function/v-output</span>.i <span class="number">0</span>

<span class="symbol">:function/v-output</span>.f <span class="number">100.0</span>

<span class="symbol">:function/e-error</span>.a

<span class="symbol">:function/e-error</span>.b

<span class="symbol">:function/l-input</span> [ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ]

<span class="symbol">:function/a-input</span> <span class="comment"># foo</span>
</pre></td></tr></table></figure><br><a name="function_piq_pib"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="code"><pre><span class="attribute">0000000</span>: <span class="string">faff ffff 0f21 0a09 7069 7169 2d74 7970  .....!..piqi-typ</span>
<span class="attribute">0000010</span>: <span class="string">6512 1266 756e 6374 696f 6e2f 6261 722d  e..function/bar-</span>
<span class="attribute">0000020</span>: <span class="string">696e 7075 7418 0212 0208 14fa ffff ff0f  input...........</span>
<span class="attribute">0000030</span>: <span class="string">220a 0970 6971 692d 7479 7065 1213 6675  "..piqi-type..fu</span>
<span class="attribute">0000040</span>: <span class="string">6e63 7469 6f6e 2f62 6172 2d6f 7574 7075  nction/bar-outpu</span>
<span class="attribute">0000050</span>: <span class="string">7418 0318 02fa ffff ff0f 210a 0970 6971  t.........!..piq</span>
<span class="attribute">0000060</span>: <span class="string">692d 7479 7065 1212 6675 6e63 7469 6f6e  i-type..function</span>
<span class="attribute">0000070</span>: <span class="string">2f62 6172 2d65 7272 6f72 1804 2100 0000  /bar-error..!...</span>
<span class="attribute">0000080</span>: <span class="string">0000 0059 40fa ffff ff0f 210a 0970 6971  ...Y@.....!..piq</span>
<span class="attribute">0000090</span>: <span class="string">692d 7479 7065 1212 6675 6e63 7469 6f6e  i-type..function</span>
<span class="attribute">00000a0</span>: <span class="string">2f62 617a 2d69 6e70 7574 1805 2a00 faff  /baz-input..*...</span>
<span class="attribute">00000b0</span>: <span class="string">ffff 0f20 0a09 7069 7169 2d74 7970 6512  ... ..piqi-type.</span>
<span class="attribute">00000c0</span>: <span class="string">1166 756e 6374 696f 6e2f 762d 6f75 7470  .function/v-outp</span>
<span class="attribute">00000d0</span>: <span class="string">7574 1806 3202 0800 3209 1100 0000 0000  ut..2...2.......</span>
<span class="attribute">00000e0</span>: <span class="string">0059 40fa ffff ff0f 1f0a 0970 6971 692d  .Y@........piqi-</span>
<span class="attribute">00000f0</span>: <span class="string">7479 7065 1210 6675 6e63 7469 6f6e 2f65  type..function/e</span>
<span class="attribute">0000100</span>: <span class="string">2d65 7272 6f72 1807 3801 3802 faff ffff  -error..8.8.....</span>
<span class="attribute">0000110</span>: <span class="string">0f1f 0a09 7069 7169 2d74 7970 6512 1066  ....piqi-type..f</span>
<span class="attribute">0000120</span>: <span class="string">756e 6374 696f 6e2f 6c2d 696e 7075 7418  unction/l-input.</span>
<span class="attribute">0000130</span>: <span class="string">0842 0608 0208 0408 06fa ffff ff0f 1f0a  .B..............</span>
<span class="attribute">0000140</span>: <span class="string">0970 6971 692d 7479 7065 1210 6675 6e63  .piqi-type..func</span>
<span class="attribute">0000150</span>: <span class="string">7469 6f6e 2f61 2d69 6e70 7574 1809 4a03  tion/a-input..J.</span>
<span class="attribute">0000160</span>: <span class="string">666f 6f                                  foo</span>
</pre></td></tr></table></figure><br>###    Complex numbers    ###<br><br><br>                <code>complex.piqi</code> contains definition of a record for representing complex numbers and, together with <code>complex.piq</code>, demonstrates the ability to define compound default values for optional fields.<br>####    complex.piqi    ####


</a></a></a></a></a></a></em>   <a href="#complex_piqi_source">Source</a><br><em>   <a href="#complex_piqi_proto">Piqi.Proto</a>
</em>   <a href="#complex_piqi_json">Piqi.JSON</a><br><em>   <a href="#complex_piqi_xml">Piqi.XML</a>
</em>   <a href="#complex_piqi_light">Piqi-light</a><br><br><a name="complex_piqi_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre>
        % a handy type abbreviation
        <span class="preprocessor">.alias</span> [
            <span class="preprocessor">.name</span> t
            <span class="preprocessor">.type</span> complex
        ]

        % complex number
        <span class="preprocessor">.record</span> [
            <span class="preprocessor">.name</span> complex

            <span class="preprocessor">.field</span> [ <span class="preprocessor">.name</span> re <span class="preprocessor">.type</span> float ]
            <span class="preprocessor">.field</span> [ <span class="preprocessor">.name</span> im <span class="preprocessor">.type</span> float ]
        ]

        % some record which uses <span class="string">"complex"</span> type
        <span class="preprocessor">.record</span> [
            <span class="preprocessor">.name</span> foo
            <span class="preprocessor">.field</span> [
                <span class="preprocessor">.name</span> bar
                <span class="preprocessor">.type</span> t
                <span class="preprocessor">.optional</span>

                % piqi supports structured defaults for optional fields:
                <span class="preprocessor">.default</span> [<span class="preprocessor">.re</span> <span class="number">1</span> <span class="preprocessor">.im</span> <span class="number">0</span>] % NOTE: it is possible to skip names <span class="keyword">and</span> use [<span class="number">1</span> <span class="number">0</span>]
            ]
        ]
</pre></td></tr></table></figure><br><a name="complex_piqi_proto"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>

<span class="cpp">        message t {
            required <span class="keyword">double</span> re = <span class="number">1</span>;
            required <span class="keyword">double</span> im = <span class="number">2</span>;
        }

        message <span class="keyword">complex</span> {
            required <span class="keyword">double</span> re = <span class="number">1</span>;
            required <span class="keyword">double</span> im = <span class="number">2</span>;
        }

        message foo {
            optional <span class="keyword">complex</span> bar = <span class="number">1</span>;
        }</span>
</pre></td></tr></table></figure><br><a name="complex_piqi_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi"</span></span>,
  "<span class="attribute">module</span>": <span class="value"><span class="string">"complex"</span></span>,
  "<span class="attribute">typedef</span>": <span class="value">[
    { "<span class="attribute">alias</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"t"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"complex"</span> </span>} </span>},
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"complex"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"re"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"im"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"float"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"foo"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          {
            "<span class="attribute">name</span>": <span class="value"><span class="string">"bar"</span></span>,
            "<span class="attribute">type</span>": <span class="value"><span class="string">"t"</span></span>,
            "<span class="attribute">mode</span>": <span class="value"><span class="string">"optional"</span></span>,
            "<span class="attribute">default</span>": <span class="value">{ "<span class="attribute">re</span>": <span class="value"><span class="number">1.0</span></span>, "<span class="attribute">im</span>": <span class="value"><span class="number">0.0</span> </span>}
          </span>}
        ]
      </span>}
    </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="complex_piqi_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">module</span>&gt;</span>complex<span class="tag">&lt;/<span class="title">module</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">alias</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>t<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">type</span>&gt;</span>complex<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">alias</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>complex<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>re<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>float<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>im<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>float<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
  <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
    <span class="tag">&lt;<span class="title">record</span>&gt;</span>
      <span class="tag">&lt;<span class="title">name</span>&gt;</span>foo<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
      <span class="tag">&lt;<span class="title">field</span>&gt;</span>
        <span class="tag">&lt;<span class="title">name</span>&gt;</span>bar<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
        <span class="tag">&lt;<span class="title">type</span>&gt;</span>t<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
        <span class="tag">&lt;<span class="title">mode</span>&gt;</span>optional<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
        <span class="tag">&lt;<span class="title">default</span>&gt;</span>
          <span class="tag">&lt;<span class="title">re</span>&gt;</span>1.0<span class="tag">&lt;/<span class="title">re</span>&gt;</span>
          <span class="tag">&lt;<span class="title">im</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">im</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">default</span>&gt;</span>
      <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="complex_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="keyword">type</span> <span class="title">t</span> = complex()

<span class="keyword">type</span> <span class="title">complex</span> =
  {
    - re :: <span class="keyword">float</span>()
    - im :: <span class="keyword">float</span>()
  }

<span class="keyword">type</span> <span class="title">foo</span> =
  {
    ? bar :: t() =
        [
            .re <span class="number">1</span>
            .im <span class="number">0</span>
        ]
  }
</pre></td></tr></table></figure><br>####    complex.piq    ####<br><br><em>   <a href="#complex_piq_source">Source</a>
</em>   <a href="#complex_piq_piq">Piq</a><br><em>   <a href="#complex_piq_json">JSON</a>
</em>   <a href="#complex_piq_xml">XML</a><br><em>   <a href="#complex_piq_piq_embedded">Piq (with embedded Piqi)</a>
</em>   <a href="#complex_piq_pib">Pib</a><br><br><a name="complex_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>:complex/t [ .re <span class="number">0</span> .im <span class="number">0</span> ]

% field names are optional:
:complex/t [ <span class="number">0</span> <span class="number">0</span> ]

% an <span class="class"><span class="keyword">object</span> without <span class="title">any</span> <span class="title">fields</span></span>
:complex/foo []
</pre></td></tr></table></figure><br><a name="complex_piq_piq"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="symbol">:complex/t</span> [
    .re <span class="number">0</span>.<span class="number">0</span>
    .im <span class="number">0</span>.<span class="number">0</span>
]

<span class="symbol">:complex/t</span> [
    .re <span class="number">0</span>.<span class="number">0</span>
    .im <span class="number">0</span>.<span class="number">0</span>
]

<span class="symbol">:complex/foo</span> []
</pre></td></tr></table></figure><br><a name="complex_piq_json"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"complex/t"</span></span>, "<span class="attribute">re</span>": <span class="value"><span class="number">0.0</span></span>, "<span class="attribute">im</span>": <span class="value"><span class="number">0.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"complex/t"</span></span>, "<span class="attribute">re</span>": <span class="value"><span class="number">0.0</span></span>, "<span class="attribute">im</span>": <span class="value"><span class="number">0.0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"complex/foo"</span></span>, "<span class="attribute">bar</span>": <span class="value">{ "<span class="attribute">re</span>": <span class="value"><span class="number">1.0</span></span>, "<span class="attribute">im</span>": <span class="value"><span class="number">0.0</span> </span>} </span>}
</pre></td></tr></table></figure><br><a name="complex_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">re</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">re</span>&gt;</span>
  <span class="tag">&lt;<span class="title">im</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">im</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">re</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">re</span>&gt;</span>
  <span class="tag">&lt;<span class="title">im</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">im</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">bar</span>&gt;</span>
    <span class="tag">&lt;<span class="title">re</span>&gt;</span>1.0<span class="tag">&lt;/<span class="title">re</span>&gt;</span>
    <span class="tag">&lt;<span class="title">im</span>&gt;</span>0.0<span class="tag">&lt;/<span class="title">im</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">bar</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="complex_piq_piq_embedded"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="code"><pre>:piqi [
    <span class="preprocessor">.module</span> complex
    <span class="preprocessor">.alias</span> [
        <span class="preprocessor">.name</span> t
        <span class="preprocessor">.type</span> complex
    ]
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> complex
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> re
            <span class="preprocessor">.type</span> float
        ]
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> im
            <span class="preprocessor">.type</span> float
        ]
    ]
    <span class="preprocessor">.record</span> [
        <span class="preprocessor">.name</span> foo
        <span class="preprocessor">.field</span> [
            <span class="preprocessor">.name</span> bar
            <span class="preprocessor">.type</span> t
            <span class="preprocessor">.optional</span>
            <span class="preprocessor">.default</span> [
                <span class="preprocessor">.re</span> <span class="number">1</span>
                <span class="preprocessor">.im</span> <span class="number">0</span>
            ]
        ]
    ]
]

:complex/t [
    <span class="preprocessor">.re</span> <span class="number">0.0</span>
    <span class="preprocessor">.im</span> <span class="number">0.0</span>
]

:complex/t [
    <span class="preprocessor">.re</span> <span class="number">0.0</span>
    <span class="preprocessor">.im</span> <span class="number">0.0</span>
]

:complex/foo []
</pre></td></tr></table></figure>

<p><a name="complex_piq_pib"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="number">0000000</span>: faff ffff <span class="number">0</span>f18 <span class="number">0</span>a09 <span class="number">7069</span> <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>piqi<span class="attribute">-typ</span>
<span class="number">0000010</span>: <span class="number">6512</span> <span class="number">0963</span> <span class="number">6</span>f6d <span class="number">706</span>c <span class="number">6578</span> <span class="number">2</span>f74 <span class="number">1802</span> <span class="number">1212</span>  e<span class="built_in">..</span>complex/t<span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000020</span>: <span class="number">0900</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0011</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000030</span>: <span class="number">0000</span> <span class="number">1212</span> <span class="number">0900</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0011</span> <span class="number">0000</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">.</span>
<span class="number">0000040</span>: <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> faff ffff <span class="number">0</span>f1a <span class="number">0</span>a09 <span class="number">7069</span>  <span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="attribute">...</span><span class="built_in">..</span>pi
<span class="number">0000050</span>: <span class="number">7169</span> <span class="number">2</span>d74 <span class="number">7970</span> <span class="number">6512</span> <span class="number">0</span>b63 <span class="number">6</span>f6d <span class="number">706</span>c <span class="number">6578</span>  qi<span class="attribute">-type</span><span class="built_in">..</span>complex
<span class="number">0000060</span>: <span class="number">2</span>f66 <span class="number">6</span>f6f <span class="number">1803</span> <span class="number">1</span>a00                      /foo<span class="attribute">...</span><span class="built_in">.</span>
</pre></td></tr></table></figure>

<h3 id="List_of_variant_==_record">List of variant == record</h3>
<pre><code>            This example shows relationship between _list <span class="keyword">of</span> variant_ <span class="keyword">and</span> _record_ types. Representation <span class="keyword">of</span> their values <span class="keyword">in</span> Piq can <span class="keyword">be</span> the same. Note JSON <span class="keyword">and</span> binary representation <span class="keyword">being</span> different.
</code></pre><h4 id="record-variant-list-piqi">record-variant-list.piqi</h4>
<ul>
<li><a href="#record-variant-list_piqi_source">Source</a></li>
<li><a href="#record-variant-list_piqi_proto">Piqi.Proto</a></li>
<li><a href="#record-variant-list_piqi_json">Piqi.JSON</a></li>
<li><a href="#record-variant-list_piqi_xml">Piqi.XML</a></li>
<li><a href="#record-variant-list_piqi_light">Piqi-light</a></li>
</ul>
<p><a name="record-variant-list_piqi_source"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre>

<span class="avrasm">        <span class="preprocessor">.record</span> [
            <span class="preprocessor">.name</span> r
            <span class="preprocessor">.field</span> [ <span class="preprocessor">.name</span> a <span class="preprocessor">.type</span> int ]
            <span class="preprocessor">.field</span> [ <span class="preprocessor">.name</span> b <span class="preprocessor">.type</span> int ]
        ]

        <span class="preprocessor">.variant</span> [
            <span class="preprocessor">.name</span> v
            <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> a <span class="preprocessor">.type</span> int ]
            <span class="preprocessor">.option</span> [ <span class="preprocessor">.name</span> b <span class="preprocessor">.type</span> int ]
        ]

        <span class="preprocessor">.list</span> [ <span class="preprocessor">.name</span> l <span class="preprocessor">.type</span> v ]</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piqi_proto"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>message r <span class="list">{
    required sint32 a = 1;
    required sint32 b = 2;
}</span>

message v <span class="list">{
    optional sint32 a = 1;
    optional sint32 b = 2;
}</span>

message l <span class="list">{
    repeated v elem = 1;
}</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piqi_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="code"><pre>{
  "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"piqi"</span></span>,
  "<span class="attribute">module</span>": <span class="value"><span class="string">"record-variant-list"</span></span>,
  "<span class="attribute">typedef</span>": <span class="value">[
    {
      "<span class="attribute">record</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"r"</span></span>,
        "<span class="attribute">field</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"b"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span></span>, "<span class="attribute">mode</span>": <span class="value"><span class="string">"required"</span> </span>}
        ]
      </span>}
    </span>},
    {
      "<span class="attribute">variant</span>": <span class="value">{
        "<span class="attribute">name</span>": <span class="value"><span class="string">"v"</span></span>,
        "<span class="attribute">option</span>": <span class="value">[
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"a"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>},
          { "<span class="attribute">name</span>": <span class="value"><span class="string">"b"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"int"</span> </span>}
        ]
      </span>}
    </span>},
    { "<span class="attribute">list</span>": <span class="value">{ "<span class="attribute">name</span>": <span class="value"><span class="string">"l"</span></span>, "<span class="attribute">type</span>": <span class="value"><span class="string">"v"</span> </span>} </span>}
  ]
</span>}
</pre></td></tr></table></figure><br><a name="record-variant-list_piqi_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre></td><td class="code"><pre>
        <span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
        <span class="tag">&lt;<span class="title">value</span>&gt;</span>
          <span class="tag">&lt;<span class="title">module</span>&gt;</span>record-variant-list<span class="tag">&lt;/<span class="title">module</span>&gt;</span>
          <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
            <span class="tag">&lt;<span class="title">record</span>&gt;</span>
              <span class="tag">&lt;<span class="title">name</span>&gt;</span>r<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
              <span class="tag">&lt;<span class="title">field</span>&gt;</span>
                <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
                <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
                <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
              <span class="tag">&lt;<span class="title">field</span>&gt;</span>
                <span class="tag">&lt;<span class="title">name</span>&gt;</span>b<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
                <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
                <span class="tag">&lt;<span class="title">mode</span>&gt;</span>required<span class="tag">&lt;/<span class="title">mode</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">field</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">record</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
          <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
            <span class="tag">&lt;<span class="title">variant</span>&gt;</span>
              <span class="tag">&lt;<span class="title">name</span>&gt;</span>v<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
              <span class="tag">&lt;<span class="title">option</span>&gt;</span>
                <span class="tag">&lt;<span class="title">name</span>&gt;</span>a<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
                <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
              <span class="tag">&lt;<span class="title">option</span>&gt;</span>
                <span class="tag">&lt;<span class="title">name</span>&gt;</span>b<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
                <span class="tag">&lt;<span class="title">type</span>&gt;</span>int<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
              <span class="tag">&lt;/<span class="title">option</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">variant</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
          <span class="tag">&lt;<span class="title">typedef</span>&gt;</span>
            <span class="tag">&lt;<span class="title">list</span>&gt;</span>
              <span class="tag">&lt;<span class="title">name</span>&gt;</span>l<span class="tag">&lt;/<span class="title">name</span>&gt;</span>
              <span class="tag">&lt;<span class="title">type</span>&gt;</span>v<span class="tag">&lt;/<span class="title">type</span>&gt;</span>
            <span class="tag">&lt;/<span class="title">list</span>&gt;</span>
          <span class="tag">&lt;/<span class="title">typedef</span>&gt;</span>
        <span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piqi_light"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">type</span> <span class="title">r</span> =
  {
    - a :: <span class="keyword">int</span>()
    - b :: <span class="keyword">int</span>()
  }

<span class="keyword">type</span> <span class="title">v</span> =
    | a :: <span class="keyword">int</span>()
    | b :: <span class="keyword">int</span>()

<span class="keyword">type</span> <span class="title">l</span> = [ v() ]
</pre></td></tr></table></figure><br>####    record-variant-list.piq    ####<br><br><em>   <a href="#record-variant-list_piq_source">Source</a>
</em>   <a href="#record-variant-list_piq_piq">Piq</a><br><em>   <a href="#record-variant-list_piq_json">JSON</a>
</em>   <a href="#record-variant-list_piq_xml">XML</a><br><em>   <a href="#record-variant-list_piq_piq_embedded">Piq (with embedded Piqi)</a>
</em>   <a href="#record-variant-list_piq_pib">Pib</a><br><br><a name="record-variant-list_piq_source"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>% record
<span class="symbol">:record-variant-list/r</span> [ .a <span class="number">0</span> .b <span class="number">1</span> ]

% variant list
<span class="symbol">:record-variant-list/l</span> [ .a <span class="number">0</span> .b <span class="number">1</span> ]

% abbreviated representation of variant values
<span class="symbol">:record-variant-list/v</span>.a <span class="number">0</span>
<span class="symbol">:record-variant-list/v</span>.b <span class="number">1</span>

% un-abbreviated representation of variant values
<span class="symbol">:record-variant-list/v</span> (.a <span class="number">0</span>)
<span class="symbol">:record-variant-list/v</span> (.b <span class="number">1</span>)
</pre></td></tr></table></figure><br><a name="record-variant-list_piq_piq"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="symbol">:record-variant-list/r</span> [
    .a <span class="number">0</span>
    .b <span class="number">1</span>
]

<span class="symbol">:record-variant-list/l</span> [
    .a <span class="number">0</span>
    .b <span class="number">1</span>
]

<span class="symbol">:record-variant-list/v</span>.a <span class="number">0</span>

<span class="symbol">:record-variant-list/v</span>.b <span class="number">1</span>

<span class="symbol">:record-variant-list/v</span>.a <span class="number">0</span>

<span class="symbol">:record-variant-list/v</span>.b <span class="number">1</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piq_json"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/r"</span></span>, "<span class="attribute">a</span>": <span class="value"><span class="number">0</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="number">1</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/l"</span></span>, "<span class="attribute">value</span>": <span class="value">[ { "<span class="attribute">a</span>": <span class="value"><span class="number">0</span> </span>}, { "<span class="attribute">b</span>": <span class="value"><span class="number">1</span> </span>} ] </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/v"</span></span>, "<span class="attribute">a</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/v"</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="number">1</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/v"</span></span>, "<span class="attribute">a</span>": <span class="value"><span class="number">0</span> </span>}

{ "<span class="attribute">piqi_type</span>": <span class="value"><span class="string">"record-variant-list/v"</span></span>, "<span class="attribute">b</span>": <span class="value"><span class="number">1</span> </span>}
</pre></td></tr></table></figure><br><a name="record-variant-list_piq_xml"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="code"><pre><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">a</span>&gt;</span>0<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>1<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>
    <span class="tag">&lt;<span class="title">a</span>&gt;</span>0<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">item</span>&gt;</span>
  <span class="tag">&lt;<span class="title">item</span>&gt;</span>
    <span class="tag">&lt;<span class="title">b</span>&gt;</span>1<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">item</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">a</span>&gt;</span>0<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>1<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">a</span>&gt;</span>0<span class="tag">&lt;/<span class="title">a</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>

<span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="tag">&lt;<span class="title">value</span>&gt;</span>
  <span class="tag">&lt;<span class="title">b</span>&gt;</span>1<span class="tag">&lt;/<span class="title">b</span>&gt;</span>
<span class="tag">&lt;/<span class="title">value</span>&gt;</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piq_piq_embedded"><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="code"><pre><span class="symbol">:piqi</span> [
    .<span class="keyword">module</span> record-variant-list
    .record [
        .name r
        .field [
            .name a
            .type int
        ]
        .field [
            .name b
            .type int
        ]
    ]
    .variant [
        .name v
        .option [
            .name a
            .type int
        ]
        .option [
            .name b
            .type int
        ]
    ]
    .list [
        .name l
        .type v
    ]
]

<span class="symbol">:record-variant-list/r</span> [
    .a <span class="number">0</span>
    .b <span class="number">1</span>
]

<span class="symbol">:record-variant-list/l</span> [
    .a <span class="number">0</span>
    .b <span class="number">1</span>
]

<span class="symbol">:record-variant-list/v</span>.a <span class="number">0</span>

<span class="symbol">:record-variant-list/v</span>.b <span class="number">1</span>

<span class="symbol">:record-variant-list/v</span>.a <span class="number">0</span>

<span class="symbol">:record-variant-list/v</span>.b <span class="number">1</span>
</pre></td></tr></table></figure><br><a name="record-variant-list_piq_pib"><br><br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>
    <span class="number">0000000</span>: faff ffff 0f24 0a09 <span class="number">7069</span> <span class="number">7169</span> 2d74 <span class="number">7970</span>  .....$..piqi-typ
    <span class="number">0000010</span>: <span class="number">6512</span> <span class="number">1572</span> <span class="number">6563</span> 6f72 642d <span class="number">7661</span> <span class="number">7269</span> <span class="number">616e</span>  e..record-varian
    <span class="number">0000020</span>: 742d 6c69 <span class="number">7374</span> 2f72 <span class="number">1802</span> <span class="number">1204</span> <span class="number">0800</span> <span class="number">1002</span>  t-list/r........
    <span class="number">0000030</span>: faff ffff 0f24 0a09 <span class="number">7069</span> <span class="number">7169</span> 2d74 <span class="number">7970</span>  .....$..piqi-typ
    <span class="number">0000040</span>: <span class="number">6512</span> <span class="number">1572</span> <span class="number">6563</span> 6f72 642d <span class="number">7661</span> <span class="number">7269</span> <span class="number">616e</span>  e..record-varian
    <span class="number">0000050</span>: 742d 6c69 <span class="number">7374</span> 2f6c <span class="number">1803</span> 1a08 0a02 <span class="number">0800</span>  t-list/l........
    <span class="number">0000060</span>: 0a02 <span class="number">1002</span> faff ffff 0f24 0a09 <span class="number">7069</span> <span class="number">7169</span>  .........$..piqi
    <span class="number">0000070</span>: 2d74 <span class="number">7970</span> <span class="number">6512</span> <span class="number">1572</span> <span class="number">6563</span> 6f72 642d <span class="number">7661</span>  -type..record-va
    <span class="number">0000080</span>: <span class="number">7269</span> <span class="number">616e</span> 742d 6c69 <span class="number">7374</span> 2f76 <span class="number">1804</span> <span class="number">2202</span>  riant-list/v..<span class="string">".
    0000090: 0800 2202 1002 2202 0800 2202 1002       .."</span><span class="keyword">...</span><span class="string">"..."</span><span class="keyword">...</span>
</pre></td></tr></table></figure>

<h2 id="OCaml_examples">OCaml examples</h2>
<p>OCaml 实例 <a href="/doc/OCaml/#examples">请查看</a>.  </p>
<h2 id="Erlang_examples">Erlang examples</h2>
<p>Eralng 实例 <a href="/doc/erlang/#examples">请查看</a>.  </p>
<h2 id="Piqi-RPC_examples">Piqi-RPC examples</h2>
<p>Piqi-RPC实例 <a href="/doc/piqi-rpc/#examples">请查看</a>.<br><br>                                                                                最后一次修订时间: March 30, 2014</p>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>                                                                                
    <script type="text/javascript">
        $(document).ready(function(){

            // accordion
            $('.accordion').accordion({
                header: '.accordion-header',
                autoHeight: false,
                navigation: true,
                collapsible: true,
                active: false
            });

            // accordion
            $('.accordion-homepage').accordion({
                header: '.accordion-header',
                autoHeight: false,
                navigation: true,
                collapsible: true,
                active: 1
            });

            // tabs
            $('.tabs').tabs();
        });
    </script>
</a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a></a>
    
  </section>
  <footer>
    
    <div class="clearfix"></div>
    
      <div class="alignleft widget">
        
        
          <time datetime="2014-06-13T08:08:30.000Z"><a href="/2014/06/13/Examples/">Jun 13 2014</a></time>
        
        
  
  <a href="/categories/实例/">@实例</a>


        

      </div>
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  


    </section>
    <footer id="footer" class="clearfix footer"><div class="alignleft">
  
  &copy; 2014 Edwin
  
</div>
<div class="clearfix"></div></footer>
  </div>
  <script src="http://lib.sinaapp.com/js/jquery/1.9.0/jquery.min.js"></script>
<script src="js/jquery.imagesloaded.min.js"></script>
<script src="js/main.js"></script>




<link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox.css">
<script type="text/javascript" src="fancybox/jquery.fancybox.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox({
    prevEffect: 'none',
    nextEffect: 'none',
    closeBtn: false,
    helpers: {
        title: {type: 'inside'},
        buttons: {
            position: 'bottom'
        }
    }
  });
})(jQuery);
</script>

</body>
</html>